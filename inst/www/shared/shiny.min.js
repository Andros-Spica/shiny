/*! shiny 1.0.3.9000 | (c) 2012-2017 RStudio, Inc. | License: GPL-3 | file LICENSE */

"use strict";function _objectDestructuringEmpty(a){if(null==a)throw new TypeError("Cannot destructure undefined")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(){function escapeHTML(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","/":"&#x2F;"};return a.replace(/[&<>'"\/]/g,function(a){return b[a]})}function randomId(){return Math.floor(4294967296+64424509440*Math.random()).toString(16)}function strToBool(a){if(a&&a.toLowerCase)switch(a.toLowerCase()){case"true":return!0;case"false":return!1;default:return}}function getStyle(a,b){var c;if(a.currentStyle)c=a.currentStyle[b];else if(window.getComputedStyle){var d=document.defaultView.getComputedStyle(a,null);d&&(c=d.getPropertyValue(b))}return c}function padZeros(a,b){for(var c=a.toString();c.length<b;)c="0"+c;return c}function roundSignif(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(b<1)throw"Significant digits must be at least 1.";return parseFloat(a.toPrecision(b))}function parseDate(a){var b=new Date(a);return isNaN(b)&&(b=new Date(a.replace(/-/g,"/"))),b}function formatDateUTC(a){return a instanceof Date?a.getUTCFullYear()+"-"+padZeros(a.getUTCMonth()+1,2)+"-"+padZeros(a.getUTCDate(),2):null}function makeResizeFilter(a,b){var c={};return function(){var d={w:a.offsetWidth,h:a.offsetHeight};0===d.w&&0===d.h||d.w===c.w&&d.h===c.h||(c=d,b(d.w,d.h))}}function makeBlob(a){try{return new Blob(a)}catch(b){var c=new _BlobBuilder;return $.each(a,function(a,b){c.append(b)}),c.getBlob()}}function pixelRatio(){return window.devicePixelRatio?window.devicePixelRatio:1}function scopeExprToFunc(a){var b=a.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0");try{var c=new Function("with (this) {\n        try {\n          return ("+a+");\n        } catch (e) {\n          console.error('Error evaluating expression: "+b+"');\n          throw e;\n        }\n      }")}catch(d){throw console.error("Error parsing expression: "+a),d}return function(a){return c.call(a)}}function asArray(a){return null===a||void 0===a?[]:$.isArray(a)?a:[a]}function mergeSort(a,b){function c(a,b,c){for(var d=0,e=0,f=[];d<b.length&&e<c.length;)a(b[d],c[e])<=0?f.push(b[d++]):f.push(c[e++]);for(;d<b.length;)f.push(b[d++]);for(;e<c.length;)f.push(c[e++]);return f}a=a.slice(0);for(var d=1;d<a.length;d*=2)for(var e=0;e<a.length;e+=2*d){var f=a.slice(e,e+d),g=a.slice(e+d,e+2*d),h=c(b,f,g),i=[e,h.length];Array.prototype.push.apply(i,h),Array.prototype.splice.apply(a,i)}return a}function debounce(a,b){var c,d,e=null;return function(){c=this,d=arguments,null!==e&&(clearTimeout(e),e=null),e=setTimeout(function(){null!==e&&(e=null,b.apply(c,d))},a)}}function throttle(a,b){function c(){d=null,e=null,null===g?(g=setTimeout(function(){g=null,f&&(f=!1,c.apply(d,e))},a),b.apply(this,arguments)):(f=!0,d=this,e=arguments)}var d,e,f=!1,g=null;return c}function addDefaultInputOpts(a){return $.extend({immediate:!1,binding:null,el:null},a)}function splitInputNameType(a){var b=a.split(":");return{name:b[0],inputType:b.length>1?b[1]:""}}function registerDependency(a,b){htmlDependencies[a]=b}function renderDependency(a){if(htmlDependencies.hasOwnProperty(a.name))return!1;registerDependency(a.name,a.version);var b=a.src.href,c=$("head").first();if(a.meta){var d=$.map(asArray(a.meta),function(a,b){var c=Object.keys(a)[0];return $("<meta>").attr("name",c).attr("content",a[c])});c.append(d)}if(a.stylesheet){var e=$.map(asArray(a.stylesheet),function(a){return $("<link rel='stylesheet' type='text/css'>").attr("href",b+"/"+encodeURI(a))});c.append(e)}if(a.script){var f=$.map(asArray(a.script),function(a){return $("<script>").attr("src",b+"/"+encodeURI(a))});c.append(f)}if(a.attachment){var g=a.attachment;if("string"==typeof g&&(g=[g]),$.isArray(g)){var h={};$.each(g,function(a,b){h[a+1+""]=b}),g=h}var i=$.map(g,function(c,d){return $("<link rel='attachment'>").attr("id",a.name+"-"+d+"-attachment").attr("href",b+"/"+encodeURI(c))});c.append(i)}if(a.head){var j=$("<head></head>");j.html(a.head),c.append(j.children())}return!0}function forceIonSliderUpdate(a){a.$cache&&a.$cache.input?a.$cache.input.trigger("change"):console.log("Couldn't force ion slider to update")}function uploadFiles(a){var b=$(a.target),c=b.data("currentUploader");c&&c.abort();var d=a.target.files,e="undefined"==typeof d,f=fileInputBinding.getId(a.target);if(e||0!==d.length){b.removeAttr("data-restore");var g=b.closest("div.input-group").find("input[type=text]");e?g.val("[Uploaded file]"):1===d.length?g.val(d[0].name):g.val(d.length+" files"),e?new IE8FileUploader(exports.shinyapp,f,a.target):b.data("currentUploader",new FileUploader(exports.shinyapp,f,d,a.target))}}function initShiny(){function a(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;a=$(a);for(var b=outputBindings.getBindings(),c=0;c<b.length;c++)for(var d=b[c].binding,e=d.find(a)||[],f=0;f<e.length;f++){var g=e[f],h=d.getId(g);if(h&&$.contains(document,g)){var i=$(g);if(!i.hasClass("shiny-bound-output")){var j=new OutputBindingAdapter(g,d);q.bindOutput(h,j),i.data("shiny-output-binding",j),i.addClass("shiny-bound-output"),i.trigger({type:"shiny:bound",binding:d,bindingType:"output"})}}}setTimeout(k,0),setTimeout(n,0)}function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=$(a).find(".shiny-bound-output");b&&$(a).hasClass("shiny-bound-output")&&c.push(a);for(var d=0;d<c.length;d++){var e=$(c[d]),f=e.data("shiny-output-binding");if(f){var g=f.binding.getId(c[d]);q.unbindOutput(g,f),e.removeClass("shiny-bound-output"),e.removeData("shiny-output-binding"),e.trigger({type:"shiny:unbound",binding:f.binding,bindingType:"output"})}}setTimeout(k,0),setTimeout(n,0)}function c(a,b,c){var d=a.getId(b);if(d){var e=a.getValue(b),f=a.getType(b);f&&(d=d+":"+f);var g={immediate:!c,binding:a,el:b};p.setInput(d,e,g)}}function d(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,b=inputBindings.getBindings(),d={},e=0;e<b.length;e++)for(var f=b[e].binding,g=f.find(a)||[],h=0;h<g.length;h++){var i=g[h],j=f.getId(i);if(j&&!w[j]){var k=f.getType(i),l=k?j+":"+k:j;d[l]={value:f.getValue(i),opts:{immediate:!0,binding:f,el:i}};var m=function(){var a=f,b=i;return function(d){c(a,b,d)}}();f.subscribe(i,m),$(i).data("shiny-input-binding",f),$(i).addClass("shiny-bound-input");var n=f.getRatePolicy(i);null!==n&&u.setRatePolicy(l,n.policy,n.delay),w[j]={binding:f,node:i},$(i).trigger({type:"shiny:bound",binding:f,bindingType:"input"})}}return d}function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=$(a).find(".shiny-bound-input");b&&$(a).hasClass("shiny-bound-input")&&c.push(a);for(var d=0;d<c.length;d++){var e=c[d],f=$(e).data("shiny-input-binding");if(f){var g=f.getId(e);$(e).removeClass("shiny-bound-input"),delete w[g],f.unsubscribe(e),$(e).trigger({type:"shiny:unbound",binding:f,bindingType:"input"})}}}function f(b){return a(b),d(b)}function g(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(a,c),b(a,c)}function h(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,b=inputBindings.getBindings(),c=0;c<b.length;c++)for(var d=b[c].binding,e=d.find(a)||[],f=0;f<e.length;f++)e[f]._shiny_initialized||(e[f]._shiny_initialized=!0,d.initialize(e[f]))}function i(a){var b=$(a),c=b.data("shiny-output-binding");return c?c.getId():null}function j(){$(".shiny-image-output, .shiny-plot-output").each(function(){var a=i(this);0===this.offsetWidth&&0===this.offsetHeight||(p.setInput(".clientdata_output_"+a+"_width",this.offsetWidth),p.setInput(".clientdata_output_"+a+"_height",this.offsetHeight))}),$(".shiny-bound-output").each(function(){var a=$(this),b=a.data("shiny-output-binding");a.trigger({type:"shiny:visualchange",visible:!l(this),binding:b}),b.onResize()})}function k(){y.normalCall()}function l(a){return null!==a&&0===a.offsetWidth&&0===a.offsetHeight&&("none"===getStyle(a,"display")||l(a.parentNode))}function m(){var a={};$(".shiny-bound-output").each(function(){var b=i(this);delete z[b];var c=l(this),d={type:"shiny:visualchange",visible:!c};c?p.setInput(".clientdata_output_"+b+"_hidden",!0):(a[b]=!0,p.setInput(".clientdata_output_"+b+"_hidden",!1));var e=$(this);d.binding=e.data("shiny-output-binding"),e.trigger(d)});for(var b in z)z.hasOwnProperty(b)&&p.setInput(".clientdata_output_"+b+"_hidden",!0);z=a}function n(){A.normalCall()}function o(a,b){return a=a.split("."),function(c){for(var d=c.namespace.split("."),e=0;e<a.length;e++)if(d.indexOf(a[e])===-1)return;b.apply(this,arguments)}}var p,q=exports.shinyapp=new ShinyApp,r=new InputBatchSender(q),s=new InputNoResendDecorator(r),t=new InputEventDecorator(s),u=new InputRateDecorator(t),v=new InputDeferDecorator(t);$('input[type="submit"], button[type="submit"]').length>0?(p=v,$('input[type="submit"], button[type="submit"]').each(function(){$(this).click(function(a){a.preventDefault(),v.submit()})})):p=u,p=new InputValidateDecorator(p),exports.onInputChange=function(a,b,c){c=addDefaultInputOpts(c),p.setInput(a,b,c)};var w={};exports.bindAll=function(a){var b=f(a);$.each(b,function(a,b){p.setInput(a,b.value,b.opts)}),initDeferredIframes()},exports.unbindAll=g,exports.initializeInputs=h,h(document);var x=_.mapValues(f(document),function(a){return a.value});$(".shiny-image-output, .shiny-plot-output").each(function(){var a=i(this);0===this.offsetWidth&&0===this.offsetHeight||(x[".clientdata_output_"+a+"_width"]=this.offsetWidth,x[".clientdata_output_"+a+"_height"]=this.offsetHeight)});var y=new Debouncer(null,j,0);r.lastChanceCallback.push(function(){y.isPending()&&y.immediateCall()});var z={};$(".shiny-bound-output").each(function(){var a=i(this);l(this)?x[".clientdata_output_"+a+"_hidden"]=!0:(z[a]=!0,x[".clientdata_output_"+a+"_hidden"]=!1)});var A=new Debouncer(null,m,0);r.lastChanceCallback.push(function(){A.isPending()&&A.immediateCall()}),$(window).resize(debounce(500,k));var B=["modal","dropdown","tab","tooltip","popover","collapse"];$.each(B,function(a,b){$("body").on("shown.bs."+b+".sendImageSize","*",o("bs",k)),$("body").on("shown.bs."+b+".sendOutputHiddenState hidden.bs."+b+".sendOutputHiddenState","*",o("bs",n))}),$("body").on("shown.sendImageSize","*",k),$("body").on("shown.sendOutputHiddenState hidden.sendOutputHiddenState","*",n),x[".clientdata_pixelratio"]=pixelRatio(),$(window).resize(function(){p.setInput(".clientdata_pixelratio",pixelRatio())}),x[".clientdata_url_protocol"]=window.location.protocol,x[".clientdata_url_hostname"]=window.location.hostname,x[".clientdata_url_port"]=window.location.port,x[".clientdata_url_pathname"]=window.location.pathname,x[".clientdata_url_search"]=window.location.search,$(window).on("pushstate",function(a){p.setInput(".clientdata_url_search",window.location.search)}),$(window).on("popstate",function(a){p.setInput(".clientdata_url_search",window.location.search)}),x[".clientdata_url_hash_initial"]=window.location.hash,x[".clientdata_url_hash"]=window.location.hash,$(window).on("hashchange",function(a){p.setInput(".clientdata_url_hash",location.hash)});var C=x[".clientdata_singletons"]=$('script[type="application/shiny-singletons"]').text();singletons.registerNames(C.split(/,/));var D=$('script[type="application/html-dependencies"]').text();$.each(D.split(/;/),function(a,b){var c=/\s*^(.+)\[(.+)\]\s*$/.exec(b);c&&registerDependency(c[1],c[2])}),x[".clientdata_allowDataUriScheme"]="undefined"!=typeof WebSocket,s.reset(x),q.connect(x),$(document).one("shiny:connected",function(){initDeferredIframes()})}function initDeferredIframes(){window.Shiny&&window.Shiny.shinyapp&&window.Shiny.shinyapp.isConnected()&&$(".shiny-frame-deferred").each(function(a,b){var c=$(b);c.removeClass("shiny-frame-deferred"),c.attr("src",c.attr("data-deferred-src")),c.attr("data-deferred-src",null)})}var $=jQuery,exports=window.Shiny=window.Shiny||{},origPushState=window.history.pushState;window.history.pushState=function(){var a=origPushState.apply(this,arguments);return $(document).trigger("pushstate"),a},$(document).on("submit","form:not([action])",function(a){a.preventDefault()}),function(){function a(a,b){return a.set(b[0],b[1]),a}function b(a,b){return a.add(b),a}function c(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function d(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function e(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function f(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function g(a,b){var c=null==a?0:a.length;return!!c&&n(a,b,0)>-1}function h(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function i(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function j(a,b,c,d){var e=-1,f=null==a?0:a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function k(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function l(a){return a.split("")}function m(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}function n(a,b,c){return b===b?D(a,b,c):m(a,o,c)}function o(a){return a!==a}function p(a){return function(b){return null==b?dd:b[a]}}function q(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function r(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function s(a){return function(b){return a(b)}}function t(a,b){return h(b,function(b){return a[b]})}function u(a,b){return a.has(b)}function v(a,b){for(var c=a.length,d=0;c--;)a[c]===b&&++d;return d}function w(a,b){return null==a?dd:a[b]}function x(a){return Xe.test(a)}function y(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function z(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function A(a,b){return function(c){return a(b(c))}}function B(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];g!==b&&g!==jd||(a[c]=jd,f[e++]=c)}return f}function C(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function D(a,b,c){for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function E(a){return x(a)?F(a):l(a)}function F(a){return a.match(We)||[]}function G(a){if(Gc(a)&&!pg(a)&&!(a instanceof J)){if(a instanceof I)return a;if(of.call(a,"__wrapped__"))return ec(a)}return new I(a)}function H(){}function I(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=dd}function J(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Id,this.__views__=[]}function K(){var a=new J(this.__wrapped__);return a.__actions__=hb(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=hb(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=hb(this.__views__),a}function L(){if(this.__filtered__){var a=new J(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function M(){var a=this.__wrapped__.value(),b=this.__dir__,c=pg(a),d=b<0,e=c?a.length:0,f=Eb(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=Jf(i,this.__takeCount__);if(!c||!d&&e==i&&n==i)return Xa(a,this.__actions__);var o=[];a:for(;i--&&m<n;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==Cd)q=u;else if(!u){if(t==Bd)continue a;break a}}o[m++]=q}return o}function N(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function O(){this.__data__=Rf?Rf(null):{},this.size=0}function P(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=b?1:0,b}function Q(a){var b=this.__data__;if(Rf){var c=b[a];return c===hd?dd:c}return of.call(b,a)?b[a]:dd}function R(a){var b=this.__data__;return Rf?b[a]!==dd:of.call(b,a)}function S(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=Rf&&b===dd?hd:b,this}function T(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function U(){this.__data__=[],this.size=0}function V(a){var b=this.__data__,c=oa(b,a);if(c<0)return!1;var d=b.length-1;return c==d?b.pop():Af.call(b,c,1),--this.size,!0}function W(a){var b=this.__data__,c=oa(b,a);return c<0?dd:b[c][1]}function X(a){return oa(this.__data__,a)>-1}function Y(a,b){var c=this.__data__,d=oa(c,a);return d<0?(++this.size,c.push([a,b])):c[d][1]=b,this}function Z(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function $(){this.size=0,this.__data__={hash:new N,map:new(Nf||T),string:new N}}function _(a){var b=Ab(this,a)["delete"](a);return this.size-=b?1:0,b}function aa(a){return Ab(this,a).get(a)}function ba(a){return Ab(this,a).has(a)}function ca(a,b){var c=Ab(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this}function da(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new Z;++b<c;)this.add(a[b])}function ea(a){return this.__data__.set(a,hd),this}function fa(a){return this.__data__.has(a)}function ga(a){var b=this.__data__=new T(a);this.size=b.size}function ha(){this.__data__=new T,this.size=0}function ia(a){var b=this.__data__,c=b["delete"](a);return this.size=b.size,c}function ja(a){return this.__data__.get(a)}function ka(a){return this.__data__.has(a)}function la(a,b){var c=this.__data__;if(c instanceof T){var d=c.__data__;if(!Nf||d.length<fd-1)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new Z(d)}return c.set(a,b),this.size=c.size,this}function ma(a,b){var c=pg(a),d=!c&&og(a),e=!c&&!d&&qg(a),f=!c&&!d&&!e&&rg(a),g=c||d||e||f,h=g?r(a.length,String):[],i=h.length;for(var j in a)!b&&!of.call(a,j)||g&&("length"==j||e&&("offset"==j||"parent"==j)||f&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||Mb(j,i))||h.push(j);return h}function na(a,b,c){var d=a[b];of.call(a,b)&&Bc(d,c)&&(c!==dd||b in a)||sa(a,b,c)}function oa(a,b){for(var c=a.length;c--;)if(Bc(a[c][0],b))return c;return-1}function pa(a,b,c,d){return bg(a,function(a,e,f){b(d,a,c(a),f)}),d}function qa(a,b){return a&&ib(b,Qc(b),a)}function ra(a,b){return a&&ib(b,Rc(b),a)}function sa(a,b,c){"__proto__"==b&&Ef?Ef(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function ta(a,b){for(var c=-1,d=b.length,e=Array(d),f=null==a;++c<d;)e[c]=f?dd:Oc(a,b[c]);return e}function ua(a,b,c,d,f,g){var h,i=b&kd,j=b&ld,k=b&md;if(c&&(h=f?c(a,d,f,g):c(a)),h!==dd)return h;if(!Fc(a))return a;var l=pg(a);if(l){if(h=Hb(a),!i)return hb(a,h)}else{var m=ig(a),n=m==Qd||m==Rd;if(qg(a))return Za(a,i);if(m==Vd||m==Kd||n&&!f){if(h=j||n?{}:Ib(a),!i)return j?kb(a,ra(h,a)):jb(a,qa(h,a))}else{if(!Ze[m])return f?a:{};h=Jb(a,m,ua,i)}}g||(g=new ga);var o=g.get(a);if(o)return o;g.set(a,h);var p=k?j?wb:vb:j?Rc:Qc,q=l?dd:p(a);return e(q||a,function(d,e){q&&(e=d,d=a[e]),na(h,e,ua(d,b,c,e,a,g))}),h}function va(a,b){var c=[];return bg(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function wa(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=Lb),e||(e=[]);++f<g;){var h=a[f];b>0&&c(h)?b>1?wa(h,b-1,c,d,e):i(e,h):d||(e[e.length]=h)}return e}function xa(a,b){return a&&cg(a,b,Qc)}function ya(a,b){return f(b,function(b){return Dc(a[b])})}function za(a,b){b=Ya(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[bc(b[c++])];return c&&c==d?a:dd}function Aa(a,b,c){var d=b(a);return pg(a)?d:i(d,c(a))}function Ba(a){return null==a?a===dd?ae:Ud:Df&&Df in Object(a)?Db(a):Xb(a)}function Ca(a,b){return null!=a&&b in Object(a)}function Da(a,b,d){b=Ya(b,a),a=Zb(a,b);var e=null==a?a:a[bc(hc(b))];return null==e?dd:c(e,a,d)}function Ea(a){return Gc(a)&&Ba(a)==Kd}function Fa(a,b,c,d,e){return a===b||(null==a||null==b||!Gc(a)&&!Gc(b)?a!==a&&b!==b:Ga(a,b,c,d,Fa,e))}function Ga(a,b,c,d,e,f){var g=pg(a),h=pg(b),i=g?Ld:ig(a),j=h?Ld:ig(b);i=i==Kd?Vd:i,j=j==Kd?Vd:j;var k=i==Vd,l=j==Vd,m=i==j;if(m&&qg(a)){if(!qg(b))return!1;g=!0,k=!1}if(m&&!k)return f||(f=new ga),g||rg(a)?rb(a,b,c,d,e,f):sb(a,b,i,c,d,e,f);if(!(c&nd)){var n=k&&of.call(a,"__wrapped__"),o=l&&of.call(b,"__wrapped__");if(n||o){var p=n?a.value():a,q=o?b.value():b;return f||(f=new ga),e(p,q,c,d,f)}}return!!m&&(f||(f=new ga),tb(a,b,c,d,e,f))}function Ha(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Object(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){h=c[e];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===dd&&!(i in a))return!1}else{var l=new ga;if(d)var m=d(j,k,i,a,b,l);if(!(m===dd?Fa(k,j,nd|od,d,l):m))return!1}}return!0}function Ia(a){if(!Fc(a)||Rb(a))return!1;var b=Dc(a)?sf:Ae;return b.test(cc(a))}function Ja(a){return Gc(a)&&Ec(a.length)&&!!Ye[Ba(a)]}function Ka(a){return"function"==typeof a?a:null==a?Xc:"object"==("undefined"==typeof a?"undefined":_typeof(a))?pg(a)?Pa(a[0],a[1]):Oa(a):ad(a)}function La(a){if(!Sb(a))return Hf(a);var b=[];for(var c in Object(a))of.call(a,c)&&"constructor"!=c&&b.push(c);return b}function Ma(a){if(!Fc(a))return Wb(a);var b=Sb(a),c=[];for(var d in a)("constructor"!=d||!b&&of.call(a,d))&&c.push(d);return c}function Na(a,b){var c=-1,d=Cc(a)?Array(a.length):[];return bg(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Oa(a){var b=Bb(a);return 1==b.length&&b[0][2]?Ub(b[0][0],b[0][1]):function(c){return c===a||Ha(c,a,b)}}function Pa(a,b){return Ob(a)&&Tb(b)?Ub(bc(a),b):function(c){var d=Oc(c,a);return d===dd&&d===b?Pc(c,a):Fa(b,d,nd|od)}}function Qa(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=za(a,g);c(h,g)&&Ta(f,Ya(g,a),h)}return f}function Ra(a){return function(b){return za(b,a)}}function Sa(a,b){return kg(Yb(a,b,Xc),a+"")}function Ta(a,b,c,d){if(!Fc(a))return a;b=Ya(b,a);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=bc(b[e]),j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):dd,j===dd&&(j=Fc(k)?k:Mb(b[e+1])?[]:{})}na(h,i,j),h=h[i]}return a}function Ua(a,b,c){var d=-1,e=a.length;b<0&&(b=-b>e?0:e+b),c=c>e?e:c,c<0&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}function Va(a,b){var c;return bg(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Wa(a){if("string"==typeof a)return a;if(pg(a))return h(a,Wa)+"";if(Ic(a))return _f?_f.call(a):"";var b=a+"";return"0"==b&&1/a==-Ed?"-0":b}function Xa(a,b){var c=a;return c instanceof J&&(c=c.value()),j(b,function(a,b){return b.func.apply(b.thisArg,i([a],b.args))},c)}function Ya(a,b){return pg(a)?a:Ob(a,b)?[a]:lg(Nc(a))}function Za(a,b){if(b)return a.slice();var c=a.length,d=wf?wf(c):new a.constructor(c);return a.copy(d),d}function $a(a){var b=new a.constructor(a.byteLength);return new vf(b).set(new vf(a)),b}function _a(a,b){var c=b?$a(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function ab(b,c,d){var e=c?d(z(b),kd):z(b);return j(e,a,new b.constructor)}function bb(a){var b=new a.constructor(a.source,xe.exec(a));return b.lastIndex=a.lastIndex,b}function cb(a,c,d){var e=c?d(C(a),kd):C(a);return j(e,b,new a.constructor)}function db(a){return $f?Object($f.call(a)):{}}function eb(a,b){var c=b?$a(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function fb(a,b,c,d){for(var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=If(f-g,0),k=Array(i+j),l=!d;++h<i;)k[h]=b[h];for(;++e<g;)(l||e<f)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function gb(a,b,c,d){for(var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=If(f-h,0),l=Array(k+j),m=!d;++e<k;)l[e]=a[e];for(var n=e;++i<j;)l[n+i]=b[i];for(;++g<h;)(m||e<f)&&(l[n+c[g]]=a[e++]);return l}function hb(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function ib(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=d?d(c[h],a[h],h,c,a):dd;i===dd&&(i=a[h]),e?sa(c,h,i):na(c,h,i)}return c}function jb(a,b){return ib(a,gg(a),b)}function kb(a,b){return ib(a,hg(a),b)}function lb(a,b){return function(c,e){var f=pg(c)?d:pa,g=b?b():{};return f(c,a,zb(e,2),g)}}function mb(a,b){return function(c,d){if(null==c)return c;if(!Cc(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=Object(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function nb(a){return function(b,c,d){for(var e=-1,f=Object(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(c(f[i],i,f)===!1)break}return b}}function ob(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=ag(a.prototype),d=a.apply(c,b);return Fc(d)?d:c}}function pb(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=Array(r),t=r;t--;)s[t]=arguments[t];if(o)var u=yb(k),w=v(s,u);if(d&&(s=fb(s,d,e,o)),f&&(s=gb(s,f,g,o)),r-=w,o&&r<j){var x=B(s,u);return qb(a,b,pb,k.placeholder,c,s,x,h,i,j-r)}var y=m?c:this,z=n?y[a]:a;return r=s.length,h?s=$b(s,h):p&&r>1&&s.reverse(),l&&i<r&&(s.length=i),this&&this!==bf&&this instanceof k&&(z=q||ob(z)),z.apply(y,s)}var l=b&wd,m=b&pd,n=b&qd,o=b&(sd|td),p=b&yd,q=n?dd:ob(a);return k}function qb(a,b,c,d,e,f,g,h,i,j){var k=b&sd,l=k?g:dd,m=k?dd:g,n=k?f:dd,o=k?dd:f;b|=k?ud:vd,b&=~(k?vd:ud),b&rd||(b&=~(pd|qd));var p=[a,b,e,n,l,o,m,h,i,j],q=c.apply(dd,p);return Qb(a)&&jg(q,p),q.placeholder=d,_b(q,a,b)}function rb(a,b,c,d,e,f){var g=c&nd,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;var j=f.get(a);if(j&&f.get(b))return j==b;var l=-1,m=!0,n=c&od?new da:dd;for(f.set(a,b),f.set(b,a);++l<h;){var o=a[l],p=b[l];if(d)var q=g?d(p,o,l,b,a,f):d(o,p,l,a,b,f);if(q!==dd){if(q)continue;m=!1;break}if(n){if(!k(b,function(a,b){if(!u(n,b)&&(o===a||e(o,a,c,d,f)))return n.push(b)})){m=!1;break}}else if(o!==p&&!e(o,p,c,d,f)){m=!1;break}}return f["delete"](a),f["delete"](b),m}function sb(a,b,c,d,e,f,g){switch(c){case de:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case ce:return!(a.byteLength!=b.byteLength||!f(new vf(a),new vf(b)));case Nd:case Od:case Td:return Bc(+a,+b);case Pd:return a.name==b.name&&a.message==b.message;case Yd:case $d:return a==b+"";case Sd:var h=z;case Zd:var i=d&nd;if(h||(h=C),a.size!=b.size&&!i)return!1;var j=g.get(a);if(j)return j==b;d|=od,g.set(a,b);var k=rb(h(a),h(b),d,e,f,g);return g["delete"](a),k;case _d:if($f)return $f.call(a)==$f.call(b)}return!1}function tb(a,b,c,d,e,f){var g=c&nd,h=vb(a),i=h.length,j=vb(b),k=j.length;if(i!=k&&!g)return!1;for(var l=i;l--;){var m=h[l];if(!(g?m in b:of.call(b,m)))return!1}var n=f.get(a);if(n&&f.get(b))return n==b;var o=!0;f.set(a,b),f.set(b,a);for(var p=g;++l<i;){m=h[l];var q=a[m],r=b[m];if(d)var s=g?d(r,q,m,b,a,f):d(q,r,m,a,b,f);if(!(s===dd?q===r||e(q,r,c,d,f):s)){o=!1;break}p||(p="constructor"==m)}if(o&&!p){var t=a.constructor,u=b.constructor;t!=u&&"constructor"in a&&"constructor"in b&&!("function"==typeof t&&t instanceof t&&"function"==typeof u&&u instanceof u)&&(o=!1)}return f["delete"](a),f["delete"](b),o}function ub(a){return kg(Yb(a,dd,gc),a+"")}function vb(a){return Aa(a,Qc,gg)}function wb(a){return Aa(a,Rc,hg)}function xb(a){for(var b=a.name+"",c=Tf[b],d=of.call(Tf,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function yb(a){var b=of.call(G,"placeholder")?G:a;return b.placeholder}function zb(){var a=G.iteratee||Yc;return a=a===Yc?Ka:a,arguments.length?a(arguments[0],arguments[1]):a}function Ab(a,b){var c=a.__data__;return Pb(b)?c["string"==typeof b?"string":"hash"]:c.map}function Bb(a){for(var b=Qc(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,Tb(e)]}return b}function Cb(a,b){var c=w(a,b);return Ia(c)?c:dd}function Db(a){var b=of.call(a,Df),c=a[Df];try{a[Df]=dd;var d=!0}catch(e){}var f=qf.call(a);return d&&(b?a[Df]=c:delete a[Df]),f}function Eb(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=Jf(b,a+g);break;case"takeRight":a=If(a,b-g)}}return{start:a,end:b}}function Fb(a){var b=a.match(ue);return b?b[1].split(ve):[]}function Gb(a,b,c){b=Ya(b,a);for(var d=-1,e=b.length,f=!1;++d<e;){var g=bc(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}return f||++d!=e?f:(e=null==a?0:a.length,!!e&&Ec(e)&&Mb(g,e)&&(pg(a)||og(a)))}function Hb(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&of.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Ib(a){return"function"!=typeof a.constructor||Sb(a)?{}:ag(xf(a))}function Jb(a,b,c,d){var e=a.constructor;switch(b){case ce:return $a(a);case Nd:case Od:return new e((+a));case de:return _a(a,d);case ee:case fe:case ge:case he:case ie:case je:case ke:case le:case me:return eb(a,d);case Sd:return ab(a,d,c);case Td:case $d:return new e(a);case Yd:return bb(a);case Zd:return cb(a,d,c);case _d:return db(a)}}function Kb(a,b){var c=b.length;if(!c)return a;var d=c-1;return b[d]=(c>1?"& ":"")+b[d],b=b.join(c>2?", ":" "),a.replace(te,"{\n/* [wrapped with "+b+"] */\n")}function Lb(a){return pg(a)||og(a)||!!(Bf&&a&&a[Bf])}function Mb(a,b){return b=null==b?Fd:b,!!b&&("number"==typeof a||Ce.test(a))&&a>-1&&a%1==0&&a<b}function Nb(a,b,c){if(!Fc(c))return!1;var d="undefined"==typeof b?"undefined":_typeof(b);return!!("number"==d?Cc(c)&&Mb(b,c.length):"string"==d&&b in c)&&Bc(c[b],a)}function Ob(a,b){if(pg(a))return!1;var c="undefined"==typeof a?"undefined":_typeof(a);return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!Ic(a))||(oe.test(a)||!ne.test(a)||null!=b&&a in Object(b))}function Pb(a){var b="undefined"==typeof a?"undefined":_typeof(a);return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function Qb(a){var b=xb(a),c=G[b];if("function"!=typeof c||!(b in J.prototype))return!1;if(a===c)return!0;var d=fg(c);return!!d&&a===d[0]}function Rb(a){return!!pf&&pf in a}function Sb(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||lf;return a===c}function Tb(a){return a===a&&!Fc(a)}function Ub(a,b){return function(c){return null!=c&&(c[a]===b&&(b!==dd||a in Object(c)))}}function Vb(a){var b=zc(a,function(a){return c.size===id&&c.clear(),a}),c=b.cache;return b}function Wb(a){var b=[];if(null!=a)for(var c in Object(a))b.push(c);return b}function Xb(a){return qf.call(a)}function Yb(a,b,d){return b=If(b===dd?a.length-1:b,0),function(){for(var e=arguments,f=-1,g=If(e.length-b,0),h=Array(g);++f<g;)h[f]=e[b+f];f=-1;for(var i=Array(b+1);++f<b;)i[f]=e[f];return i[b]=d(h),c(a,this,i)}}function Zb(a,b){return b.length<2?a:za(a,Ua(b,0,-1))}function $b(a,b){for(var c=a.length,d=Jf(b.length,c),e=hb(a);d--;){var f=b[d];a[d]=Mb(f,c)?e[f]:dd}return a}function _b(a,b,c){var d=b+"";return kg(a,Kb(d,dc(Fb(d),c)))}function ac(a){var b=0,c=0;return function(){var d=Kf(),e=Ad-(d-c);if(c=d,e>0){if(++b>=zd)return arguments[0]}else b=0;return a.apply(dd,arguments)}}function bc(a){if("string"==typeof a||Ic(a))return a;var b=a+"";return"0"==b&&1/a==-Ed?"-0":b}function cc(a){if(null!=a){try{return nf.call(a)}catch(b){}try{return a+""}catch(b){}}return""}function dc(a,b){return e(Jd,function(c){var d="_."+c[0];b&c[1]&&!g(a,d)&&a.push(d)}),a.sort()}function ec(a){if(a instanceof J)return a.clone();var b=new I(a.__wrapped__,a.__chain__);return b.__actions__=hb(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function fc(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===dd?1:Lc(b),Ua(a,b<0?0:b,d)):[]}function gc(a){var b=null==a?0:a.length;return b?wa(a,1):[]}function hc(a){var b=null==a?0:a.length;return b?a[b-1]:dd}function ic(a){return null==a?a:Lf.call(a)}function jc(a,b,c){return a&&a.length?(b=c||b===dd?1:Lc(b),Ua(a,0,b<0?0:b)):[]}function kc(a){var b=G(a);return b.__chain__=!0,b}function lc(a,b){return b(a),a}function mc(a,b){return b(a)}function nc(){return kc(this)}function oc(){return new I(this.value(),this.__chain__)}function pc(){this.__values__===dd&&(this.__values__=Jc(this.value()));var a=this.__index__>=this.__values__.length,b=a?dd:this.__values__[this.__index__++];
return{done:a,value:b}}function qc(){return this}function rc(a){for(var b,c=this;c instanceof H;){var d=ec(c);d.__index__=0,d.__values__=dd,b?e.__wrapped__=d:b=d;var e=d;c=c.__wrapped__}return e.__wrapped__=a,b}function sc(){var a=this.__wrapped__;if(a instanceof J){var b=a;return this.__actions__.length&&(b=new J(this)),b=b.reverse(),b.__actions__.push({func:mc,args:[ic],thisArg:dd}),new I(b,this.__chain__)}return this.thru(ic)}function tc(){return Xa(this.__wrapped__,this.__actions__)}function uc(a,b){var c=pg(a)?f:va;return c(a,zb(b,3))}function vc(a,b){var c=pg(a)?e:bg;return c(a,zb(b,3))}function wc(a,b){var c=pg(a)?h:Na;return c(a,zb(b,3))}function xc(a,b,c){var d=pg(a)?j:q,e=arguments.length<3;return d(a,zb(b,4),c,e,bg)}function yc(a,b,c){var d=pg(a)?k:Va;return c&&Nb(a,b,c)&&(b=dd),d(a,zb(b,3))}function zc(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new TypeError(gd);var c=function d(){var c=arguments,e=b?b.apply(this,c):c[0],f=d.cache;if(f.has(e))return f.get(e);var g=a.apply(this,c);return d.cache=f.set(e,g)||f,g};return c.cache=new(zc.Cache||Z),c}function Ac(a){if("function"!=typeof a)throw new TypeError(gd);return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function Bc(a,b){return a===b||a!==a&&b!==b}function Cc(a){return null!=a&&Ec(a.length)&&!Dc(a)}function Dc(a){if(!Fc(a))return!1;var b=Ba(a);return b==Qd||b==Rd||b==Md||b==Xd}function Ec(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Fd}function Fc(a){var b="undefined"==typeof a?"undefined":_typeof(a);return null!=a&&("object"==b||"function"==b)}function Gc(a){return null!=a&&"object"==("undefined"==typeof a?"undefined":_typeof(a))}function Hc(a){return"string"==typeof a||!pg(a)&&Gc(a)&&Ba(a)==$d}function Ic(a){return"symbol"==("undefined"==typeof a?"undefined":_typeof(a))||Gc(a)&&Ba(a)==_d}function Jc(a){if(!a)return[];if(Cc(a))return Hc(a)?E(a):hb(a);if(Cf&&a[Cf])return y(a[Cf]());var b=ig(a),c=b==Sd?z:b==Zd?C:Vc;return c(a)}function Kc(a){if(!a)return 0===a?a:0;if(a=Mc(a),a===Ed||a===-Ed){var b=a<0?-1:1;return b*Gd}return a===a?a:0}function Lc(a){var b=Kc(a),c=b%1;return b===b?c?b-c:b:0}function Mc(a){if("number"==typeof a)return a;if(Ic(a))return Hd;if(Fc(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=Fc(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(se,"");var c=ze.test(a);return c||Be.test(a)?$e(a.slice(2),c?2:8):ye.test(a)?Hd:+a}function Nc(a){return null==a?"":Wa(a)}function Oc(a,b,c){var d=null==a?dd:za(a,b);return d===dd?c:d}function Pc(a,b){return null!=a&&Gb(a,b,Ca)}function Qc(a){return Cc(a)?ma(a):La(a)}function Rc(a){return Cc(a)?ma(a,!0):Ma(a)}function Sc(a,b){var c={};return b=zb(b,3),xa(a,function(a,d,e){sa(c,b(a,d,e),a)}),c}function Tc(a,b){var c={};return b=zb(b,3),xa(a,function(a,d,e){sa(c,d,b(a,d,e))}),c}function Uc(a,b){if(null==a)return{};var c=h(wb(a),function(a){return[a]});return b=zb(b),Qa(a,c,function(a,c){return b(a,c[0])})}function Vc(a){return null==a?[]:t(a,Qc(a))}function Wc(a){return function(){return a}}function Xc(a){return a}function Yc(a){return Ka("function"==typeof a?a:ua(a,kd))}function Zc(a,b,c){var d=Qc(b),f=ya(b,d);null!=c||Fc(b)&&(f.length||!d.length)||(c=b,b=a,a=this,f=ya(b,Qc(b)));var g=!(Fc(c)&&"chain"in c&&!c.chain),h=Dc(a);return e(f,function(c){var d=b[c];a[c]=d,h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__),e=c.__actions__=hb(this.__actions__);return e.push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,i([this.value()],arguments))})}),a}function $c(){return bf._===this&&(bf._=rf),this}function _c(){}function ad(a){return Ob(a)?p(bc(a)):Ra(a)}function bd(){return[]}function cd(){return!1}var dd,ed="4.17.4",fd=200,gd="Expected a function",hd="__lodash_hash_undefined__",id=500,jd="__lodash_placeholder__",kd=1,ld=2,md=4,nd=1,od=2,pd=1,qd=2,rd=4,sd=8,td=16,ud=32,vd=64,wd=128,xd=256,yd=512,zd=800,Ad=16,Bd=1,Cd=2,Dd=3,Ed=1/0,Fd=9007199254740991,Gd=1.7976931348623157e308,Hd=NaN,Id=4294967295,Jd=[["ary",wd],["bind",pd],["bindKey",qd],["curry",sd],["curryRight",td],["flip",yd],["partial",ud],["partialRight",vd],["rearg",xd]],Kd="[object Arguments]",Ld="[object Array]",Md="[object AsyncFunction]",Nd="[object Boolean]",Od="[object Date]",Pd="[object Error]",Qd="[object Function]",Rd="[object GeneratorFunction]",Sd="[object Map]",Td="[object Number]",Ud="[object Null]",Vd="[object Object]",Wd="[object Promise]",Xd="[object Proxy]",Yd="[object RegExp]",Zd="[object Set]",$d="[object String]",_d="[object Symbol]",ae="[object Undefined]",be="[object WeakMap]",ce="[object ArrayBuffer]",de="[object DataView]",ee="[object Float32Array]",fe="[object Float64Array]",ge="[object Int8Array]",he="[object Int16Array]",ie="[object Int32Array]",je="[object Uint8Array]",ke="[object Uint8ClampedArray]",le="[object Uint16Array]",me="[object Uint32Array]",ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oe=/^\w*$/,pe=/^\./,qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,se=/^\s+|\s+$/g,te=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ve=/,? & /,we=/\\(\\)?/g,xe=/\w*$/,ye=/^[-+]0x[0-9a-f]+$/i,ze=/^0b[01]+$/i,Ae=/^\[object .+?Constructor\]$/,Be=/^0o[0-7]+$/i,Ce=/^(?:0|[1-9]\d*)$/,De="\\ud800-\\udfff",Ee="\\u0300-\\u036f",Fe="\\ufe20-\\ufe2f",Ge="\\u20d0-\\u20ff",He=Ee+Fe+Ge,Ie="\\ufe0e\\ufe0f",Je="["+De+"]",Ke="["+He+"]",Le="\\ud83c[\\udffb-\\udfff]",Me="(?:"+Ke+"|"+Le+")",Ne="[^"+De+"]",Oe="(?:\\ud83c[\\udde6-\\uddff]){2}",Pe="[\\ud800-\\udbff][\\udc00-\\udfff]",Qe="\\u200d",Re=Me+"?",Se="["+Ie+"]?",Te="(?:"+Qe+"(?:"+[Ne,Oe,Pe].join("|")+")"+Se+Re+")*",Ue=Se+Re+Te,Ve="(?:"+[Ne+Ke+"?",Ke,Oe,Pe,Je].join("|")+")",We=RegExp(Le+"(?="+Le+")|"+Ve+Ue,"g"),Xe=RegExp("["+Qe+De+He+Ie+"]"),Ye={};Ye[ee]=Ye[fe]=Ye[ge]=Ye[he]=Ye[ie]=Ye[je]=Ye[ke]=Ye[le]=Ye[me]=!0,Ye[Kd]=Ye[Ld]=Ye[ce]=Ye[Nd]=Ye[de]=Ye[Od]=Ye[Pd]=Ye[Qd]=Ye[Sd]=Ye[Td]=Ye[Vd]=Ye[Yd]=Ye[Zd]=Ye[$d]=Ye[be]=!1;var Ze={};Ze[Kd]=Ze[Ld]=Ze[ce]=Ze[de]=Ze[Nd]=Ze[Od]=Ze[ee]=Ze[fe]=Ze[ge]=Ze[he]=Ze[ie]=Ze[Sd]=Ze[Td]=Ze[Vd]=Ze[Yd]=Ze[Zd]=Ze[$d]=Ze[_d]=Ze[je]=Ze[ke]=Ze[le]=Ze[me]=!0,Ze[Pd]=Ze[Qd]=Ze[be]=!1;var $e=parseInt,_e="object"==("undefined"==typeof global?"undefined":_typeof(global))&&global&&global.Object===Object&&global,af="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,bf=_e||af||Function("return this")(),cf="object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,df=cf&&"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module&&!module.nodeType&&module,ef=df&&df.exports===cf,ff=ef&&_e.process,gf=function(){try{return ff&&ff.binding&&ff.binding("util")}catch(a){}}(),hf=gf&&gf.isTypedArray,jf=Array.prototype,kf=Function.prototype,lf=Object.prototype,mf=bf["__core-js_shared__"],nf=kf.toString,of=lf.hasOwnProperty,pf=function(){var a=/[^.]+$/.exec(mf&&mf.keys&&mf.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),qf=lf.toString,rf=bf._,sf=RegExp("^"+nf.call(of).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tf=ef?bf.Buffer:dd,uf=bf.Symbol,vf=bf.Uint8Array,wf=tf?tf.allocUnsafe:dd,xf=A(Object.getPrototypeOf,Object),yf=Object.create,zf=lf.propertyIsEnumerable,Af=jf.splice,Bf=uf?uf.isConcatSpreadable:dd,Cf=uf?uf.iterator:dd,Df=uf?uf.toStringTag:dd,Ef=function(){try{var a=Cb(Object,"defineProperty");return a({},"",{}),a}catch(b){}}(),Ff=Object.getOwnPropertySymbols,Gf=tf?tf.isBuffer:dd,Hf=A(Object.keys,Object),If=Math.max,Jf=Math.min,Kf=Date.now,Lf=jf.reverse,Mf=Cb(bf,"DataView"),Nf=Cb(bf,"Map"),Of=Cb(bf,"Promise"),Pf=Cb(bf,"Set"),Qf=Cb(bf,"WeakMap"),Rf=Cb(Object,"create"),Sf=Qf&&new Qf,Tf={},Uf=cc(Mf),Vf=cc(Nf),Wf=cc(Of),Xf=cc(Pf),Yf=cc(Qf),Zf=uf?uf.prototype:dd,$f=Zf?Zf.valueOf:dd,_f=Zf?Zf.toString:dd,ag=function(){function a(){}return function(b){if(!Fc(b))return{};if(yf)return yf(b);a.prototype=b;var c=new a;return a.prototype=dd,c}}();G.prototype=H.prototype,G.prototype.constructor=G,I.prototype=ag(H.prototype),I.prototype.constructor=I,J.prototype=ag(H.prototype),J.prototype.constructor=J,N.prototype.clear=O,N.prototype["delete"]=P,N.prototype.get=Q,N.prototype.has=R,N.prototype.set=S,T.prototype.clear=U,T.prototype["delete"]=V,T.prototype.get=W,T.prototype.has=X,T.prototype.set=Y,Z.prototype.clear=$,Z.prototype["delete"]=_,Z.prototype.get=aa,Z.prototype.has=ba,Z.prototype.set=ca,da.prototype.add=da.prototype.push=ea,da.prototype.has=fa,ga.prototype.clear=ha,ga.prototype["delete"]=ia,ga.prototype.get=ja,ga.prototype.has=ka,ga.prototype.set=la;var bg=mb(xa),cg=nb(),dg=Sf?function(a,b){return Sf.set(a,b),a}:Xc,eg=Ef?function(a,b){return Ef(a,"toString",{configurable:!0,enumerable:!1,value:Wc(b),writable:!0})}:Xc,fg=Sf?function(a){return Sf.get(a)}:_c,gg=Ff?function(a){return null==a?[]:(a=Object(a),f(Ff(a),function(b){return zf.call(a,b)}))}:bd,hg=Ff?function(a){for(var b=[];a;)i(b,gg(a)),a=xf(a);return b}:bd,ig=Ba;(Mf&&ig(new Mf(new ArrayBuffer(1)))!=de||Nf&&ig(new Nf)!=Sd||Of&&ig(Of.resolve())!=Wd||Pf&&ig(new Pf)!=Zd||Qf&&ig(new Qf)!=be)&&(ig=function(a){var b=Ba(a),c=b==Vd?a.constructor:dd,d=c?cc(c):"";if(d)switch(d){case Uf:return de;case Vf:return Sd;case Wf:return Wd;case Xf:return Zd;case Yf:return be}return b});var jg=ac(dg),kg=ac(eg),lg=Vb(function(a){var b=[];return pe.test(a)&&b.push(""),a.replace(qe,function(a,c,d,e){b.push(d?e.replace(we,"$1"):c||a)}),b}),mg=(ub(function(a){var b=a.length,c=b?a[0]:0,d=this.__wrapped__,e=function(b){return ta(b,a)};return!(b>1||this.__actions__.length)&&d instanceof J&&Mb(c)?(d=d.slice(c,+c+(b?1:0)),d.__actions__.push({func:mc,args:[e],thisArg:dd}),new I(d,this.__chain__).thru(function(a){return b&&!a.length&&a.push(dd),a})):this.thru(e)}),lb(function(a,b,c){of.call(a,c)?a[c].push(b):sa(a,c,[b])})),ng=lb(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]});zc.Cache=Z;var og=Ea(function(){return arguments}())?Ea:function(a){return Gc(a)&&of.call(a,"callee")&&!zf.call(a,"callee")},pg=Array.isArray,qg=Gf||cd,rg=hf?s(hf):Ja;G.chain=kc,G.constant=Wc,G.drop=fc,G.filter=uc,G.flatten=gc,G.groupBy=mg,G.iteratee=Yc,G.keys=Qc,G.keysIn=Rc,G.map=wc,G.mapKeys=Sc,G.mapValues=Tc,G.memoize=zc,G.mixin=Zc,G.negate=Ac,G.partition=ng,G.pickBy=Uc,G.property=ad,G.reverse=ic,G.take=jc,G.tap=lc,G.thru=mc,G.toArray=Jc,G.values=Vc,Zc(G,G),G.eq=Bc,G.forEach=vc,G.get=Oc,G.hasIn=Pc,G.identity=Xc,G.isArguments=og,G.isArray=pg,G.isArrayLike=Cc,G.isBuffer=qg,G.isFunction=Dc,G.isLength=Ec,G.isObject=Fc,G.isObjectLike=Gc,G.isString=Hc,G.isSymbol=Ic,G.isTypedArray=rg,G.last=hc,G.stubArray=bd,G.stubFalse=cd,G.noConflict=$c,G.noop=_c,G.reduce=xc,G.some=yc,G.toFinite=Kc,G.toInteger=Lc,G.toNumber=Mc,G.toString=Nc,G.each=vc,Zc(G,function(){var a={};return xa(G,function(b,c){of.call(G.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),G.VERSION=ed,e(["drop","take"],function(a,b){J.prototype[a]=function(c){c=c===dd?1:If(Lc(c),0);var d=this.__filtered__&&!b?new J(this):this.clone();return d.__filtered__?d.__takeCount__=Jf(c,d.__takeCount__):d.__views__.push({size:Jf(c,Id),type:a+(d.__dir__<0?"Right":"")}),d},J.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),e(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c==Bd||c==Dd;J.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:zb(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),e(["head","last"],function(a,b){var c="take"+(b?"Right":"");J.prototype[a]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");J.prototype[a]=function(){return this.__filtered__?new J(this):this[c](1)}}),J.prototype.compact=function(){return this.filter(Xc)},J.prototype.find=function(a){return this.filter(a).head()},J.prototype.findLast=function(a){return this.reverse().find(a)},J.prototype.invokeMap=Sa(function(a,b){return"function"==typeof a?new J(this):this.map(function(c){return Da(c,a,b)})}),J.prototype.reject=function(a){return this.filter(Ac(zb(a)))},J.prototype.slice=function(a,b){a=Lc(a);var c=this;return c.__filtered__&&(a>0||b<0)?new J(c):(a<0?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==dd&&(b=Lc(b),c=b<0?c.dropRight(-b):c.take(b-a)),c)},J.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},J.prototype.toArray=function(){return this.take(Id)},xa(J.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=G[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);e&&(G.prototype[b]=function(){var b=this.__wrapped__,g=d?[1]:arguments,h=b instanceof J,j=g[0],k=h||pg(b),l=function(a){var b=e.apply(G,i([a],g));return d&&m?b[0]:b};k&&c&&"function"==typeof j&&1!=j.length&&(h=k=!1);var m=this.__chain__,n=!!this.__actions__.length,o=f&&!m,p=h&&!n;if(!f&&k){b=p?b:new J(this);var q=a.apply(b,g);return q.__actions__.push({func:mc,args:[l],thisArg:dd}),new I(q,m)}return o&&p?a.apply(this,g):(q=this.thru(l),o?d?q.value()[0]:q.value():q)})}),e(["pop","push","shift","sort","splice","unshift"],function(a){var b=jf[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);G.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(pg(e)?e:[],a)}return this[c](function(c){return b.apply(pg(c)?c:[],a)})}}),xa(J.prototype,function(a,b){var c=G[b];if(c){var d=c.name+"",e=Tf[d]||(Tf[d]=[]);e.push({name:b,func:c})}}),Tf[pb(dd,qd).name]=[{name:"wrapper",func:dd}],J.prototype.clone=K,J.prototype.reverse=L,J.prototype.value=M,G.prototype.chain=nc,G.prototype.commit=oc,G.prototype.next=pc,G.prototype.plant=rc,G.prototype.reverse=sc,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=tc,G.prototype.first=G.prototype.head,Cf&&(G.prototype[Cf]=qc),"function"==typeof define&&"object"==_typeof(define.amd)&&define.amd?(bf._=G,define(function(){return G})):df?((df.exports=G)._=G,cf._=G):bf._=G}.call(this);var _=window._.noConflict(),_BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,$escape=exports.$escape=function(a){return a.replace(/([!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~])/g,"\\$1")},browser=function(){function a(){var a=-1;if(c){var b=navigator.userAgent,d=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");null!==d.exec(b)&&(a=parseFloat(RegExp.$1))}return a}var b=!1;/\bQt\//.test(window.navigator.userAgent)&&($(document.documentElement).addClass("qt"),b=!0),/\bQt\/5/.test(window.navigator.userAgent)&&/Linux/.test(window.navigator.userAgent)&&$(document.documentElement).addClass("qt5");var c="Microsoft Internet Explorer"===navigator.appName;return{isQt:b,isIE:c,IEVersion:a()}}(),Invoker=function(a,b){this.target=a,this.func=b};(function(){this.normalCall=this.immediateCall=function(){this.func.apply(this.target,arguments)}}).call(Invoker.prototype);var Debouncer=function(a,b,c){this.target=a,this.func=b,this.delayMs=c,this.timerId=null,this.args=null};(function(){this.normalCall=function(){var a=this;this.$clearTimer(),this.args=arguments,this.timerId=setTimeout(function(){null!==a.timerId&&(a.$clearTimer(),a.$invoke())},this.delayMs)},this.immediateCall=function(){this.$clearTimer(),this.args=arguments,this.$invoke()},this.isPending=function(){return null!==this.timerId},this.$clearTimer=function(){null!==this.timerId&&(clearTimeout(this.timerId),this.timerId=null)},this.$invoke=function(){this.func.apply(this.target,this.args),this.args=null}}).call(Debouncer.prototype);var Throttler=function(a,b,c){this.target=a,this.func=b,this.delayMs=c,this.timerId=null,this.args=null};(function(){this.normalCall=function(){var a=this;this.args=arguments,null===this.timerId&&(this.$invoke(),this.timerId=setTimeout(function(){null!==a.timerId&&(a.$clearTimer(),a.args&&a.normalCall.apply(a,a.args))},this.delayMs))},this.immediateCall=function(){this.$clearTimer(),this.args=arguments,this.$invoke()},this.isPending=function(){return null!==this.timerId},this.$clearTimer=function(){null!==this.timerId&&(clearTimeout(this.timerId),this.timerId=null)},this.$invoke=function(){this.func.apply(this.target,this.args),this.args=null}}).call(Throttler.prototype);var InputBatchSender=function(a){this.shinyapp=a,this.timerId=null,this.pendingData={},this.reentrant=!1,this.lastChanceCallback=[]};(function(){this.setInput=function(a,b){var c=this;this.pendingData[a]=b,this.timerId||this.reentrant||(this.timerId=setTimeout(function(){c.reentrant=!0;try{$.each(c.lastChanceCallback,function(a,b){b()}),c.timerId=null;var a=c.pendingData;c.pendingData={},c.shinyapp.sendInput(a)}finally{c.reentrant=!1}},0))}}).call(InputBatchSender.prototype);var InputNoResendDecorator=function(a,b){this.target=a,this.lastSentValues=this.reset(b)};(function(){this.setInput=function(a,b){var c=splitInputNameType(a),d=c.name,e=c.inputType,f=JSON.stringify(b);this.lastSentValues[d]&&this.lastSentValues[d].jsonValue===f&&this.lastSentValues[d].inputType===e||(this.lastSentValues[d]={jsonValue:f,inputType:e},this.target.setInput(a,b))},this.reset=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b={};for(var c in a)if(a.hasOwnProperty(c)){var d=splitInputNameType(c),e=d.name,f=d.inputType;b[e]={jsonValue:JSON.stringify(a[c]),inputType:f}}this.lastSentValues=b}}).call(InputNoResendDecorator.prototype);var InputEventDecorator=function(a){this.target=a};(function(){this.setInput=function(a,b,c){var d=jQuery.Event("shiny:inputchanged"),e=splitInputNameType(a);d.name=e.name,d.inputType=e.inputType,d.value=b,d.binding=c.binding,d.el=c.el,$(document).trigger(d),d.isDefaultPrevented()||(a=d.name,""!==d.inputType&&(a+=":"+d.inputType),this.target.setInput(a,d.value))}}).call(InputEventDecorator.prototype);var InputRateDecorator=function(a){this.target=a,this.inputRatePolicies={}};(function(){this.setInput=function(a,b,c){this.$ensureInit(a),c.immediate?this.inputRatePolicies[a].immediateCall(a,b,c):this.inputRatePolicies[a].normalCall(a,b,c)},this.setRatePolicy=function(a,b,c){"direct"===b?this.inputRatePolicies[a]=new Invoker(this,this.$doSetInput):"debounce"===b?this.inputRatePolicies[a]=new Debouncer(this,this.$doSetInput,c):"throttle"===b&&(this.inputRatePolicies[a]=new Throttler(this,this.$doSetInput,c))},this.$ensureInit=function(a){a in this.inputRatePolicies||this.setRatePolicy(a,"direct")},this.$doSetInput=function(a,b,c){this.target.setInput(a,b,c)}}).call(InputRateDecorator.prototype);var InputDeferDecorator=function(a){this.target=a,this.pendingInput={}};(function(){this.setInput=function(a,b,c){/^\./.test(a)?this.target.setInput(a,b,c):this.pendingInput[a]={value:b,opts:c}},this.submit=function(){for(var a in this.pendingInput)if(this.pendingInput.hasOwnProperty(a)){var b=this.pendingInput[a];this.target.setInput(a,b.value,b.opts)}}}).call(InputDeferDecorator.prototype);var InputValidateDecorator=function(a){this.target=a};(function(){this.setInput=function(a,b,c){if(!a)throw"Can't set input with empty name.";c=addDefaultInputOpts(c),this.target.setInput(a,b,c)}}).call(InputValidateDecorator.prototype);var ShinyApp=function(){this.$socket=null,this.$inputValues={},this.$initialInput={},this.$bindings={},this.$values={},this.$errors={},this.$conditionals={},this.$pendingMessages=[],this.$activeRequests={},this.$nextRequestId=0,this.$allowReconnect=!1};(function(){function narrowScope(a,b){return _(a).pickBy(function(a,c){return _objectDestructuringEmpty(a),c.startsWith(b)}).mapKeys(function(a,c,d){return _objectDestructuringEmpty(d),_objectDestructuringEmpty(a),c.substring(b.length)}).value()}function addMessageHandler(a,b){if(messageHandlers[a])throw'handler for message of type "'+a+'" already added.';if("function"!=typeof b)throw"handler must be a function.";if(1!==b.length)throw"handler must be a function that takes one argument.";messageHandlerOrder.push(a),messageHandlers[a]=b}function addCustomMessageHandler(a,b){if(customMessageHandlers[a]){var c=customMessageHandlerOrder.indexOf(a);c!==-1&&(customMessageHandlerOrder.splice(c,1),delete customMessageHandlers[a])}if("function"!=typeof b)throw"handler must be a function.";if(1!==b.length)throw"handler must be a function that takes one argument.";customMessageHandlerOrder.push(a),customMessageHandlers[a]=b}this.connect=function(a){if(this.$socket)throw"Connect was already called on this application object";this.$socket=this.createSocket(),this.$initialInput=a,$.extend(this.$inputValues,a),this.$updateConditionals()},this.isConnected=function(){return!!this.$socket};var scheduledReconnect=null;this.reconnect=function(){if(clearTimeout(scheduledReconnect),this.isConnected())throw"Attempted to reconnect, but already connected.";this.$socket=this.createSocket(),this.$initialInput=$.extend({},this.$inputValues),this.$updateConditionals()},this.createSocket=function(){var a=this,b=exports.createSocket||function(){var a="ws:";"https:"===window.location.protocol&&(a="wss:");var b=window.location.pathname;/^([$#!&-;=?-[\]_a-z~]|%[0-9a-fA-F]{2})+$/.test(b)||(b=encodeURI(b),browser.isQt&&(b=encodeURI(b))),/\/$/.test(b)||(b+="/"),b+="websocket/";var c=new WebSocket(a+"//"+window.location.host+b);return c.binaryType="arraybuffer",c},c=b(),d=!1;return c.onopen=function(){for(d=!0,$(document).trigger({type:"shiny:connected",socket:c}),a.onConnected(),c.send(JSON.stringify({method:"init",data:a.$initialInput}));a.$pendingMessages.length;){var b=a.$pendingMessages.shift();c.send(b)}},c.onmessage=function(b){a.dispatchMessage(b.data)},c.onclose=function(){d&&($(document).trigger({type:"shiny:disconnected",socket:c}),a.$notifyDisconnected()),a.onDisconnected(),a.$removeSocket()},c},this.sendInput=function(a){var b=JSON.stringify({method:"update",data:a});this.$sendMsg(b),$.extend(this.$inputValues,a),this.$updateConditionals()},this.$notifyDisconnected=function(){var a=function(a){return"127.0.0.1"===a?"localhost":a},b=parent!==window?document.referrer:null;if(b){var c=document.createElement("a");if(c.href=b,a(c.hostname)===a(window.location.hostname)){var d=c.protocol.replace(":",""),e=d+"://"+c.hostname;c.port&&(e=e+":"+c.port),parent.postMessage("disconnected",e)}}},this.$removeSocket=function(){this.$socket=null},this.$scheduleReconnect=function(a){var b=this;scheduledReconnect=setTimeout(function(){b.reconnect()},a)};var reconnectDelay=function(){var a=0,b=[1500,1500,2500,2500,5500,5500,10500];return{next:function(){var c=a;return c>=b.length&&(c=b.length-1),a++,b[c]},reset:function(){a=0}}}();this.onDisconnected=function(){var a=$("#shiny-disconnected-overlay");if(0===a.length&&$(document.body).append('<div id="shiny-disconnected-overlay"></div>'),this.$allowReconnect===!0&&this.$socket.allowReconnect===!0||"force"===this.$allowReconnect){var b=reconnectDelay.next();exports.showReconnectDialog(b),this.$scheduleReconnect(b)}},this.onConnected=function(){$("#shiny-disconnected-overlay").remove(),exports.hideReconnectDialog(),reconnectDelay.reset()},this.makeRequest=function(a,b,c,d,e){for(var f=this.$nextRequestId;this.$activeRequests[f];)f=(f+1)%1e9;this.$nextRequestId=f+1,this.$activeRequests[f]={onSuccess:c,onError:d};var g=JSON.stringify({method:a,args:b,tag:f});if(e){var h=function(a){var b=new ArrayBuffer(4),c=new DataView(b);return c.setUint32(0,a,!0),b},i=[];i.push(h(16908802));var j=makeBlob([g]);i.push(h(j.size)),i.push(j);for(var k=0;k<e.length;k++)i.push(h(e[k].byteLength||e[k].size||0)),i.push(e[k]);g=makeBlob(i)}this.$sendMsg(g)},this.$sendMsg=function(a){this.$socket.readyState?this.$socket.send(a):this.$pendingMessages.push(a)},this.receiveError=function(a,b){if(this.$errors[a]!==b){this.$errors[a]=b,delete this.$values[a];var c=this.$bindings[a],d=jQuery.Event("shiny:error");d.name=a,d.error=b,d.binding=c,$(c?c.el:document).trigger(d),!d.isDefaultPrevented()&&c&&c.onValueError&&c.onValueError(d.error)}},this.receiveOutput=function(a,b){if(this.$values[a]!==b){this.$values[a]=b,delete this.$errors[a];var c=this.$bindings[a],d=jQuery.Event("shiny:value");return d.name=a,d.value=b,d.binding=c,$(c?c.el:document).trigger(d),!d.isDefaultPrevented()&&c&&c.onValueChange(d.value),b}},this.bindOutput=function(a,b){if(!a)throw"Can't bind an element with no ID";if(this.$bindings[a])throw"Duplicate binding for ID "+a;return this.$bindings[a]=b,void 0!==this.$values[a]?b.onValueChange(this.$values[a]):void 0!==this.$errors[a]&&b.onValueError(this.$errors[a]),b},this.unbindOutput=function(a,b){return this.$bindings[a]===b&&(delete this.$bindings[a],!0)},this.$updateConditionals=function(){$(document).trigger({type:"shiny:conditional"});var a={};for(var b in this.$inputValues)if(this.$inputValues.hasOwnProperty(b)){var c=b.replace(/:.*/,"");a[c]=this.$inputValues[b]}for(var d={input:a,output:this.$values},e=$(document).find("[data-display-if]"),f=0;f<e.length;f++){var g=$(e[f]),h=g.data("data-display-if-func");if(!h){var i=g.attr("data-display-if");h=scopeExprToFunc(i),g.data("data-display-if-func",h)}var j=g.attr("data-ns-prefix"),k=j?{input:narrowScope(d.input,j),output:narrowScope(d.output,j)}:d,l=h(k),m="none"!==g.css("display");l!==m&&(l?(g.trigger("show"),g.show(),g.trigger("shown")):(g.trigger("hide"),g.hide(),g.trigger("hidden")))}};var messageHandlerOrder=[],messageHandlers={},customMessageHandlerOrder=[],customMessageHandlers={};exports.addCustomMessageHandler=addCustomMessageHandler,this.dispatchMessage=function(a){var b={};if("string"==typeof a)b=JSON.parse(a);else{for(var c=new DataView(a,0,1).getUint8(0),d=new DataView(a,1,c),e=[],f=0;f<c;f++)e.push(String.fromCharCode(d.getUint8(f)));var g=e.join("");a=a.slice(c+1),b.custom={},b.custom[g]=a}var h=jQuery.Event("shiny:message");h.message=b,$(document).trigger(h),h.isDefaultPrevented()||(this._sendMessagesToHandlers(h.message,messageHandlers,messageHandlerOrder),this.$updateConditionals())},this._sendMessagesToHandlers=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];a.hasOwnProperty(e)&&b[e].call(this,a[e])}},addMessageHandler("values",function(a){for(var b in this.$bindings)this.$bindings.hasOwnProperty(b)&&this.$bindings[b].showProgress(!1);for(var c in a)a.hasOwnProperty(c)&&this.receiveOutput(c,a[c])}),addMessageHandler("errors",function(a){for(var b in a)a.hasOwnProperty(b)&&this.receiveError(b,a[b])}),addMessageHandler("inputMessages",function(a){for(var b=0;b<a.length;b++){var c=$(".shiny-bound-input#"+$escape(a[b].id)),d=c.data("shiny-input-binding");if(c.length>0){var e=c[0],f=jQuery.Event("shiny:updateinput");f.message=a[b].message,f.binding=d,$(e).trigger(f),f.isDefaultPrevented()||d.receiveMessage(e,f.message)}}}),addMessageHandler("javascript",function(message){eval(message)}),addMessageHandler("console",function(a){for(var b=0;b<a.length;b++)console.log&&console.log(a[b])}),addMessageHandler("progress",function(a){if(a.type&&a.message){var b=progressHandlers[a.type];b&&b.call(this,a.message)}}),addMessageHandler("notification",function(a){if("show"===a.type)exports.notifications.show(a.message);else{if("remove"!==a.type)throw"Unkown notification type: "+a.type;exports.notifications.remove(a.message)}}),addMessageHandler("modal",function(a){if("show"===a.type)exports.modal.show(a.message);else{if("remove"!==a.type)throw"Unkown modal type: "+a.type;exports.modal.remove()}}),addMessageHandler("response",function(a){var b=a.tag,c=this.$activeRequests[b];c&&(delete this.$activeRequests[b],"value"in a?c.onSuccess(a.value):c.onError(a.error))}),addMessageHandler("allowReconnect",function(a){if(a!==!0&&a!==!1&&"force"!==a)throw"Invalid value for allowReconnect: "+a;this.$allowReconnect=a}),addMessageHandler("custom",function(a){exports.oncustommessage&&exports.oncustommessage(a),this._sendMessagesToHandlers(a,customMessageHandlers,customMessageHandlerOrder)}),addMessageHandler("config",function(a){this.config={workerId:a.workerId,sessionId:a.sessionId},a.user&&(exports.user=a.user),$(document).trigger("shiny:sessioninitialized")}),addMessageHandler("busy",function(a){"busy"===a?($(document.documentElement).addClass("shiny-busy"),$(document).trigger("shiny:busy")):"idle"===a&&($(document.documentElement).removeClass("shiny-busy"),$(document).trigger("shiny:idle"))}),addMessageHandler("recalculating",function(a){if(a.hasOwnProperty("name")&&a.hasOwnProperty("status")){var b=this.$bindings[a.name];$(b?b.el:null).trigger({type:"shiny:"+a.status})}}),addMessageHandler("reload",function(a){window.location.reload()}),addMessageHandler("shiny-insert-ui",function(a){var b=$(a.selector);0===b.length?(console.warn('The selector you chose ("'+a.selector+'") could not be found in the DOM.'),exports.renderHtml(a.content.html,$([]),a.content.deps)):b.each(function(b,c){return exports.renderContent(c,a.content,a.where),a.multiple})}),addMessageHandler("shiny-remove-ui",function(a){var b=$(a.selector);b.each(function(b,c){return exports.unbindAll(c,!0),$(c).remove(),a.multiple})}),addMessageHandler("updateQueryString",function(a){if("replace"===a.mode)return void window.history.replaceState(null,null,a.queryString);var b=null;if("#"===a.queryString.charAt(0))b="hash";else{if("?"!==a.queryString.charAt(0))throw"The 'query' string must start with either '?' (to update the query string) or with '#' (to update the hash).";b="query"}var c=window.location.pathname,d=window.location.search,e=window.location.hash,f=c;f+="query"===b?a.queryString:d+a.queryString,window.history.pushState(null,null,f),a.queryString.indexOf("#")!==-1&&(b="hash"),window.location.hash!==e&&(b="hash"),"hash"===b&&$(document).trigger("hashchange")}),addMessageHandler("resetBrush",function(a){exports.resetBrush(a.brushId)});var progressHandlers={binding:function a(b){var c=b.id,a=this.$bindings[c];a&&a.showProgress&&a.showProgress(!0)},open:function(a){if("notification"===a.style)exports.notifications.show({html:'<div id="shiny-progress-'+a.id+'" class="shiny-progress-notification"><div class="progress progress-striped active" style="display: none;"><div class="progress-bar"></div></div><div class="progress-text"><span class="progress-message">message</span> <span class="progress-detail"></span></div></div>',id:a.id,duration:null});else if("old"===a.style){var b=$(".shiny-progress-container");0===b.length&&(b=$('<div class="shiny-progress-container"></div>'),$("body").append(b));var c=$(".shiny-progress.open").length,d=$('<div class="shiny-progress open"><div class="progress progress-striped active"><div class="progress-bar bar"></div></div><div class="progress-text"><span class="progress-message">message</span><span class="progress-detail"></span></div></div>');d.attr("id",a.id),b.append(d);var e=d.find(".progress");e.css("top",c*e.height()+"px");var f=d.find(".progress-text");f.css("top",3*e.height()+c*f.outerHeight()+"px"),d.hide()}},update:function(a){if("notification"===a.style){var b=$("#shiny-progress-"+a.id);if(0===b.length)return;"undefined"!=typeof a.message&&b.find(".progress-message").text(a.message),"undefined"!=typeof a.detail&&b.find(".progress-detail").text(a.detail),"undefined"!=typeof a.value&&null!==a.value&&(b.find(".progress").show(),b.find(".progress-bar").width(100*a.value+"%"))}else if("old"===a.style){var b=$("#"+a.id+".shiny-progress");"undefined"!=typeof a.message&&b.find(".progress-message").text(a.message),"undefined"!=typeof a.detail&&b.find(".progress-detail").text(a.detail),"undefined"!=typeof a.value&&null!==a.value&&(b.find(".progress").show(),b.find(".bar").width(100*a.value+"%")),b.fadeIn()}},close:function(a){if("notification"===a.style)exports.notifications.remove(a.id);else if("old"===a.style){var b=$("#"+a.id+".shiny-progress");b.removeClass("open"),b.fadeOut({complete:function(){b.remove(),0===$(".shiny-progress").length&&$(".shiny-progress-container").remove()}})}}};exports.progressHandlers=progressHandlers,this.getTestSnapshotBaseUrl=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.fullUrl,c=void 0===b||b,d=window.location,e="";
return c&&(e=d.origin+d.pathname.replace(/\/[^\/]*$/,"")),e+="/session/"+encodeURIComponent(this.config.sessionId)+"/dataobj/shinytest?w="+encodeURIComponent(this.config.workerId)+"&nonce="+randomId()}}).call(ShinyApp.prototype),exports.showReconnectDialog=function(){function a(){var c=$("#shiny-reconnect-time");if(0!==c.length){var d=Math.floor((b-(new Date).getTime())/1e3);d>0?c.text(" in "+d+"s"):c.text("..."),setTimeout(a,1e3)}}var b=null;return function(c){if(b=(new Date).getTime()+c,!($("#shiny-reconnect-text").length>0)){var d='<span id="shiny-reconnect-text">Attempting to reconnect</span><span id="shiny-reconnect-time"></span>',e='<a id="shiny-reconnect-now" href="#" onclick="Shiny.shinyapp.reconnect();">Try now</a>';exports.notifications.show({id:"reconnect",html:d,action:e,duration:null,closeButton:!1,type:"warning"}),a()}}}(),exports.hideReconnectDialog=function(){exports.notifications.remove("reconnect")},exports.notifications=function(){function a(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.html,d=void 0===b?"":b,e=a.action,j=void 0===e?"":e,k=a.deps,l=void 0===k?[]:k,m=a.duration,n=void 0===m?5e3:m,o=a.id,p=void 0===o?null:o,q=a.closeButton,r=void 0===q||q,s=a.type,t=void 0===s?null:s;p||(p=randomId()),f();var u=c(p);0===u.length&&(u=g(p));var v='<div class="shiny-notification-content-text">'+d+"</div>"+('<div class="shiny-notification-content-action">'+j+"</div>"),w=u.find(".shiny-notification-content");exports.renderContent(w,{html:v,deps:l});var x=u.attr("class").split(/\s+/).filter(function(a){return a.match(/^shiny-notification-/)}).join(" ");u.removeClass(x),t&&"default"!==t&&u.addClass("shiny-notification-"+t);var y=u.find(".shiny-notification-close");return r&&0===y.length?u.append('<div class="shiny-notification-close">&times;</div>'):r||0===y.length||y.remove(),n?h(p,n):i(p),p}function b(a){c(a).fadeOut(j,function(){exports.unbindAll(this),$(this).remove(),0===d().length&&e().remove()})}function c(a){return a?e().find("#shiny-notification-"+$escape(a)):null}function d(){return e().find(".shiny-notification").map(function(){return this.id.replace(/shiny-notification-/,"")}).get()}function e(){return $("#shiny-notification-panel")}function f(){var a=e();return a.length>0?a:($("body").append('<div id="shiny-notification-panel">'),a)}function g(a){var d=c(a);return 0===d.length&&(d=$('<div id="shiny-notification-'+a+'" class="shiny-notification"><div class="shiny-notification-close">&times;</div><div class="shiny-notification-content"></div></div>'),d.find(".shiny-notification-close").on("click",function(c){c.preventDefault(),c.stopPropagation(),b(a)}),e().append(d)),d}function h(a,d){i(a);var e=setTimeout(function(){b(a)},d);c(a).data("removalCallback",e)}function i(a){var b=c(a),d=b.data("removalCallback");d&&clearTimeout(d)}var j=250;return{show:a,remove:b}}(),exports.modal={show:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.html,c=void 0===b?"":b,d=a.deps,e=void 0===d?[]:d;$(".modal-backdrop").remove();var f=$("#shiny-modal-wrapper");0===f.length&&(f=$('<div id="shiny-modal-wrapper"></div>'),$("body").append(f),f.on("hidden.bs.modal",function(a){a.target===$("#shiny-modal")[0]&&(exports.unbindAll(f),f.remove())})),f.on("keydown.shinymodal",function(a){$("#shiny-modal").data("keyboard")!==!1&&27===a.keyCode&&(a.stopPropagation(),a.preventDefault())}),exports.renderContent(f,{html:c,deps:e})},remove:function(){var a=$("#shiny-modal-wrapper");a.off("keydown.shinymodal"),a.find(".modal").length>0?a.find(".modal").modal("hide"):(exports.unbindAll(a),a.remove())}};var FileProcessor=function(a){this.files=a,this.fileIndex=-1,this.aborted=!1,this.completed=!1,this.$run()};(function(){this.onBegin=function(a,b){setTimeout(b,0)},this.onFile=function(a,b){setTimeout(b,0)},this.onComplete=function(){},this.onAbort=function(){},this.abort=function(){this.completed||this.aborted||(this.aborted=!0,this.onAbort())},this.$getRun=function(){var a=this,b=!1;return function(){b||(b=!0,a.$run())}},this.$run=function(){if(!this.aborted&&!this.completed){if(this.fileIndex<0)return this.fileIndex=0,void this.onBegin(this.files,this.$getRun());if(this.fileIndex===this.files.length)return this.completed=!0,void this.onComplete();var a=this.files[this.fileIndex++];this.onFile(a,this.$getRun())}}}).call(FileProcessor.prototype);var BindingRegistry=function(){this.bindings=[],this.bindingNames={}};(function(){this.register=function(a,b,c){var d={binding:a,priority:c||0};this.bindings.unshift(d),b&&(this.bindingNames[b]=d,a.name=b)},this.setPriority=function(a,b){var c=this.bindingNames[a];if(!c)throw"Tried to set priority on unknown binding "+a;c.priority=b||0},this.getPriority=function(a){var b=this.bindingNames[a];return!!b&&b.priority},this.getBindings=function(){return mergeSort(this.bindings,function(a,b){return b.priority-a.priority})}}).call(BindingRegistry.prototype);var inputBindings=exports.inputBindings=new BindingRegistry,outputBindings=exports.outputBindings=new BindingRegistry,OutputBinding=exports.OutputBinding=function(){};(function(){this.find=function(a){throw"Not implemented"},this.getId=function(a){return a["data-input-id"]||a.id},this.onValueChange=function(a,b){this.clearError(a),this.renderValue(a,b)},this.onValueError=function(a,b){this.renderError(a,b)},this.renderError=function(a,b){if(this.clearError(a),""===b.message)return void $(a).empty();var c="shiny-output-error";null!==b.type&&(c=c+" "+$.map(asArray(b.type),function(a){return c+"-"+a}).join(" ")),$(a).addClass(c).text(b.message)},this.clearError=function(a){$(a).attr("class",function(a,b){return b.replace(/(^|\s)shiny-output-error\S*/g,"")})},this.showProgress=function(a,b){var c="recalculating";b?$(a).addClass(c):$(a).removeClass(c)}}).call(OutputBinding.prototype);var textOutputBinding=new OutputBinding;$.extend(textOutputBinding,{find:function(a){return $(a).find(".shiny-text-output")},renderValue:function(a,b){$(a).text(b)}}),outputBindings.register(textOutputBinding,"shiny.textOutput");var imageOutputBinding=new OutputBinding;$.extend(imageOutputBinding,{find:function(a){return $(a).find(".shiny-image-output, .shiny-plot-output")},renderValue:function(a,b){function c(a,b){return void 0===a?b:a}var d,e=this.getId(a),f=$(a);f.off(".image_output");var g=f.find("img");if(0===g.length?(d=document.createElement("img"),f.append(d),g=$(d)):(d=g[0],g.trigger("reset")),!b)return void f.empty();var h={clickId:f.data("click-id"),clickClip:c(strToBool(f.data("click-clip")),!0),dblclickId:f.data("dblclick-id"),dblclickClip:c(strToBool(f.data("dblclick-clip")),!0),dblclickDelay:c(f.data("dblclick-delay"),400),hoverId:f.data("hover-id"),hoverClip:c(strToBool(f.data("hover-clip")),!0),hoverDelayType:c(f.data("hover-delay-type"),"debounce"),hoverDelay:c(f.data("hover-delay"),300),hoverNullOutside:c(strToBool(f.data("hover-null-outside")),!1),brushId:f.data("brush-id"),brushClip:c(strToBool(f.data("brush-clip")),!0),brushDelayType:c(f.data("brush-delay-type"),"debounce"),brushDelay:c(f.data("brush-delay"),300),brushFill:c(f.data("brush-fill"),"#666"),brushStroke:c(f.data("brush-stroke"),"#000"),brushOpacity:c(f.data("brush-opacity"),.3),brushDirection:c(f.data("brush-direction"),"xy"),brushResetOnNew:c(strToBool(f.data("brush-reset-on-new")),!1),coordmap:b.coordmap};$.each(b,function(a,b){null!==b&&"coordmap"!==a&&d.setAttribute(a,b)});for(var i=0;i<d.attributes.length;i++){var j=d.attributes[i];j.specified&&!b.hasOwnProperty(j.name)&&d.removeAttribute(j.name)}h.coordmap||(h.coordmap=[]),imageutils.initCoordmap(f,h.coordmap);var k=imageutils.createClickInfo(f,h.dblclickId,h.dblclickDelay);if(f.on("mousedown.image_output",k.mousedown),browser.isIE&&8===browser.IEVersion&&f.on("dblclick.image_output",k.dblclickIE8),h.clickId){var l=imageutils.createClickHandler(h.clickId,h.clickClip,h.coordmap);f.on("mousedown2.image_output",l.mousedown),g.on("reset",l.onResetImg)}if(h.dblclickId){var m=imageutils.createClickHandler(h.dblclickId,h.clickClip,h.coordmap);f.on("dblclick2.image_output",m.mousedown),g.on("reset",m.onResetImg)}if(h.hoverId){var n=imageutils.createHoverHandler(h.hoverId,h.hoverDelay,h.hoverDelayType,h.hoverClip,h.hoverNullOutside,h.coordmap);f.on("mousemove.image_output",n.mousemove),f.on("mouseout.image_output",n.mouseout),g.on("reset",n.onResetImg)}if(h.brushId){g.css("-webkit-user-drag","none"),g.on("dragstart",function(){return!1}),f.on("selectstart.image_output",function(){return!1});var o=imageutils.createBrushHandler(h.brushId,f,h,h.coordmap,e);f.on("mousedown.image_output",o.mousedown),f.on("mousemove.image_output",o.mousemove),g.on("reset",o.onResetImg)}(h.clickId||h.dblclickId||h.hoverId||h.brushId)&&f.addClass("crosshair"),b.error&&console.log("Error on server extracting coordmap: "+b.error)},renderError:function(a,b){$(a).find("img").trigger("reset"),OutputBinding.prototype.renderError.call(this,a,b)},clearError:function(a){$(a).contents().filter(function(){return"IMG"!==this.tagName&&this.id!==a.id+"_brush"}).remove(),OutputBinding.prototype.clearError.call(this,a)}}),outputBindings.register(imageOutputBinding,"shiny.imageOutput");var imageutils={};imageutils.initPanelScales=function(a){function b(a,b,c,d,e,f){f=f||!0;var g=(e-d)/(c-b),h=a-b,i=h*g+d;if(f){var j=Math.max(e,d),k=Math.min(e,d);i>j?i=j:i<k&&(i=k)}return i}function c(a,c,d,e,f){return{scale:function(g,h){return f&&(g=Math.log(g)/Math.log(f)),b(g,a,c,d,e,h)},scaleInv:function(g,h){var i=b(g,d,e,a,c,h);return f&&(i=Math.pow(f,i)),i}}}function d(a){var b=a.domain,d=a.range,e=a.log&&a.log.x?a.log.x:null,f=a.log&&a.log.y?a.log.y:null,g=c(b.left,b.right,d.left,d.right,e),h=c(b.bottom,b.top,d.bottom,d.top,f);a.scale=function(a,b){return{x:g.scale(a.x,b),y:h.scale(a.y,b)}},a.scaleInv=function(a,b){return{x:g.scaleInv(a.x,b),y:h.scaleInv(a.y,b)}},a.clip=function(b){var c={x:b.x,y:b.y},d=a.range;return b.x>d.right?c.x=d.right:b.x<d.left&&(c.x=d.left),b.y>d.bottom?c.y=d.bottom:b.y<d.top&&(c.y=d.top),c}}for(var e=0;e<a.length;e++){var f=a[e];d(f)}},imageutils.initCoordmap=function(a,b){var c=a[0];if(0===b.length){var d={top:0,left:0,right:c.clientWidth-1,bottom:c.clientHeight-1};b[0]={domain:d,range:d,mapping:{}}}imageutils.initPanelScales(b),b.mouseOffset=function(b){var c=a.offset();return{x:b.pageX-c.left,y:b.pageY-c.top}},b.findBox=function(a,b){return{xmin:Math.min(a.x,b.x),xmax:Math.max(a.x,b.x),ymin:Math.min(a.y,b.y),ymax:Math.max(a.y,b.y)}},b.shiftToRange=function(a,b,c){a instanceof Array||(a=[a]);var d=Math.max.apply(null,a),e=Math.min.apply(null,a),f=0;d>c?f=c-d:e<b&&(f=b-e);for(var g=[],h=0;h<a.length;h++)g[h]=a[h]+f;return g},b.getPanel=function(a,c){c=c||0;for(var d,e=a.x,f=a.y,g=[],h=[],i=0;i<b.length;i++)if(d=b[i].range,e<=d.right+c&&e>=d.left-c&&f<=d.bottom+c&&f>=d.top-c){g.push(b[i]);var j=0,k=0;e>d.right&&e<=d.right+c?j=e-d.right:e<d.left&&e>=d.left-c&&(j=e-d.left),f>d.bottom&&f<=d.bottom+c?k=f-d.bottom:f<d.top&&f>=d.top-c&&(k=f-d.top),h.push(Math.sqrt(Math.pow(j,2)+Math.pow(k,2)))}if(g.length){var l=Math.min.apply(null,h);for(i=0;i<g.length;i++)if(h[i]===l)return g[i]}return null},b.isInPanel=function(a,c){return c=c||0,!!b.getPanel(a,c)},b.mouseCoordinateSender=function(a,c,d){return void 0===c&&(c=!0),void 0===d&&(d=!1),function(e){if(null===e)return void exports.onInputChange(a,null);var f=b.mouseOffset(e);if(!b.isInPanel(f)){if(d)return void exports.onInputChange(a,null);if(c)return}if(!c||b.isInPanel(f)){var g=b.getPanel(f),h=g.scaleInv(f);$.extend(h,g.panel_vars),h.mapping=g.mapping,h.domain=g.domain,h.range=g.range,h.log=g.log,h[".nonce"]=Math.random(),exports.onInputChange(a,h)}}}},imageutils.createClickInfo=function(a,b,c){function d(b,c){var d=$.Event(b,{which:c.which,pageX:c.pageX,pageY:c.pageY,offsetX:c.offsetX,offsetY:c.offsetY});a.trigger(d)}function e(){j&&(d("mousedown2",j),j=null)}function f(a){j=a,i=setTimeout(function(){e()},c)}function g(a){if(1===a.which)return b?void(null===j?f(a):(clearTimeout(i),j&&Math.abs(j.offsetX-a.offsetX)>2||Math.abs(j.offsetY-a.offsetY)>2?(e(),f(a)):(j=null,d("dblclick2",a)))):void d("mousedown2",a)}function h(a){a.which=1,d("dblclick2",a)}var i=null,j=null;return{mousedown:g,dblclickIE8:h}},imageutils.createClickHandler=function(a,b,c){var d=c.mouseCoordinateSender(a,b);return{mousedown:function(a){1===a.which&&d(a)},onResetImg:function(){d(null)}}},imageutils.createHoverHandler=function(a,b,c,d,e,f){var g,h=f.mouseCoordinateSender(a,d,e);g="throttle"===c?new Throttler(null,h,b):new Debouncer(null,h,b);var i;return i=e?function(){g.normalCall(null)}:function(){},{mousemove:function(a){g.normalCall(a)},mouseout:i,onResetImg:function(){g.immediateCall(null)}}},imageutils.createBrushHandler=function(a,b,c,d,e){function f(a){b.removeClass("crosshair grabbable grabbing ns-resize ew-resize nesw-resize nwse-resize"),a&&b.addClass(a)}function g(){var d=r.boundsData();if(isNaN(d.xmin))return exports.onInputChange(a,null),void imageOutputBinding.find(document).trigger("shiny-internal:brushed",{brushId:a,outputId:null});var f=r.getPanel();$.extend(d,f.panel_vars),d.mapping=f.mapping,d.domain=f.domain,d.range=f.range,d.log=f.log,d.direction=c.brushDirection,d.brushId=a,d.outputId=e,exports.onInputChange(a,d),b.data("mostRecentBrush",!0),imageOutputBinding.find(document).trigger("shiny-internal:brushed",d)}function h(a){if(!(r.isBrushing()||r.isDragging()||r.isResizing())&&1===a.which){var b=d.mouseOffset(a);if(!c.brushClip||d.isInPanel(b,q))if(r.up({x:NaN,y:NaN}),r.down(b),r.isInResizeArea(b))r.startResizing(b),$(document).on("mousemove.image_brush",l).on("mouseup.image_brush",o);else if(r.isInsideBrush(b))r.startDragging(b),f("grabbing"),$(document).on("mousemove.image_brush",k).on("mouseup.image_brush",n);else{var e=d.getPanel(b,q);r.startBrushing(e.clip(b)),$(document).on("mousemove.image_brush",j).on("mouseup.image_brush",m)}}}function i(a){var b=d.mouseOffset(a);if(!(r.isBrushing()||r.isDragging()||r.isResizing()))if(r.isInResizeArea(b)){var c=r.whichResizeSides(b);c.left&&c.top||c.right&&c.bottom?f("nwse-resize"):c.left&&c.bottom||c.right&&c.top?f("nesw-resize"):c.left||c.right?f("ew-resize"):(c.top||c.bottom)&&f("ns-resize")}else f(r.isInsideBrush(b)?"grabbable":d.isInPanel(b,q)?"crosshair":null)}function j(a){r.brushTo(d.mouseOffset(a)),s.normalCall()}function k(a){r.dragTo(d.mouseOffset(a)),s.normalCall()}function l(a){r.resizeTo(d.mouseOffset(a)),s.normalCall()}function m(a){if(1===a.which)return $(document).off("mousemove.image_brush").off("mouseup.image_brush"),r.up(d.mouseOffset(a)),r.stopBrushing(),f("crosshair"),r.down().x===r.up().x&&r.down().y===r.up().y?(r.reset(),void s.immediateCall()):void(s.isPending()&&s.immediateCall())}function n(a){1===a.which&&($(document).off("mousemove.image_brush").off("mouseup.image_brush"),r.up(d.mouseOffset(a)),r.stopDragging(),f("grabbable"),s.isPending()&&s.immediateCall())}function o(a){1===a.which&&($(document).off("mousemove.image_brush").off("mouseup.image_brush"),r.up(d.mouseOffset(a)),r.stopResizing(),s.isPending()&&s.immediateCall())}function p(){c.brushResetOnNew&&b.data("mostRecentBrush")&&(r.reset(),s.immediateCall())}var q=20,r=imageutils.createBrush(b,c,d,q);b.on("shiny-internal:brushed.image_output",function(c,d){d.brushId===a&&d.outputId!==e&&(b.data("mostRecentBrush",!1),r.reset())});var s;return s="throttle"===c.brushDelayType?new Throttler(null,g,c.brushDelay):new Debouncer(null,g,c.brushDelay),c.brushResetOnNew||b.data("mostRecentBrush")&&(r.importOldBrush(),s.immediateCall()),{mousedown:h,mousemove:i,onResetImg:p}},imageutils.createBrush=function(a,b,c,d){function e(){F.brushing=!1,F.dragging=!1,F.resizing=!1,F.down={x:NaN,y:NaN},F.up={x:NaN,y:NaN},F.resizeSides={left:!1,right:!1,top:!1,bottom:!1},F.boundsPx={xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},F.boundsData={xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},F.panel=null,F.changeStartBounds={xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},E&&E.remove()}function f(){function b(a,b){if(void 0===a)return void 0===b;if(null===a)return null===b;var c=Object.getOwnPropertyNames(a),d=Object.getOwnPropertyNames(b);if(c.length!==d.length)return!1;for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!==b[f])return!1}return!0}var d=a.find("#"+D.id+"_brush");if(0!==d.length){var e=d.data("bounds-data"),f=d.data("panel");if(e&&f){for(var g=0;g<c.length;g++){var h=c[g];if(b(f.mapping,h.mapping)&&b(f.panel_vars,h.panel_vars)){F.panel=c[g];break}}if(null===F.panel)return void d.remove();E=d,k(e),n()}}}function g(a){var b=F.boundsPx;return a.x<=b.xmax&&a.x>=b.xmin&&a.y<=b.ymax&&a.y>=b.ymin}function h(a){var b=i(a);return b.left||b.right||b.top||b.bottom}function i(a){var c=F.boundsPx,d={xmin:c.xmin-C,xmax:c.xmax+C,ymin:c.ymin-C,ymax:c.ymax+C},e={left:!1,right:!1,top:!1,bottom:!1};return("xy"===b.brushDirection||"x"===b.brushDirection)&&a.y<=d.ymax&&a.y>=d.ymin&&(a.x<c.xmin&&a.x>=d.xmin?e.left=!0:a.x>c.xmax&&a.x<=d.xmax&&(e.right=!0)),("xy"===b.brushDirection||"y"===b.brushDirection)&&a.x<=d.xmax&&a.x>=d.xmin&&(a.y<c.ymin&&a.y>=d.ymin?e.top=!0:a.y>c.ymax&&a.y<=d.ymax&&(e.bottom=!0)),e}function j(a){if(void 0===a)return F.boundsPx;var d={x:a.xmin,y:a.ymin},e={x:a.xmax,y:a.ymax},f=F.panel,g=f.range;b.brushClip&&(d=f.clip(d),e=f.clip(e)),"xy"===b.brushDirection||("x"===b.brushDirection?(d.y=g.top,e.y=g.bottom):"y"===b.brushDirection&&(d.x=g.left,e.x=g.right)),F.boundsPx={xmin:d.x,xmax:e.x,ymin:d.y,ymax:e.y};var h=F.panel.scaleInv(d),i=F.panel.scaleInv(e);F.boundsData=c.findBox(h,i),F.boundsData=_.mapValues(F.boundsData,function(a){return roundSignif(a,14)}),E.data("bounds-data",F.boundsData),E.data("panel",F.panel)}function k(a){if(void 0===a)return F.boundsData;var b={x:a.xmin,y:a.ymin},c={x:a.xmax,y:a.ymax},d=F.panel.scale(b),e=F.panel.scale(c);j({xmin:Math.min(d.x,e.x),xmax:Math.max(d.x,e.x),ymin:Math.min(d.y,e.y),ymax:Math.max(d.y,e.y)})}function l(){return F.panel}function m(){E&&E.remove(),E=$(document.createElement("div")).attr("id",D.id+"_brush").css({"background-color":b.brushFill,opacity:b.brushOpacity,"pointer-events":"none",position:"absolute"}).hide();var c="1px solid "+b.brushStroke;"xy"===b.brushDirection?E.css({border:c}):"x"===b.brushDirection?E.css({"border-left":c,"border-right":c}):"y"===b.brushDirection&&E.css({"border-top":c,"border-bottom":c}),a.append(E),E.offset({x:0,y:0}).width(0).outerHeight(0)}function n(){var b=a.offset(),c=F.boundsPx;E.offset({top:b.top+c.ymin,left:b.left+c.xmin}).outerWidth(c.xmax-c.xmin+1).outerHeight(c.ymax-c.ymin+1)}function o(a){return void 0===a?F.down:void(F.down=a)}function p(a){return void 0===a?F.up:void(F.up=a)}function q(){return F.brushing}function r(){F.brushing=!0,m(),F.panel=c.getPanel(F.down,d),j(c.findBox(F.down,F.down)),n()}function s(a){j(c.findBox(F.down,a)),E.show(),n()}function t(){F.brushing=!1,j(c.findBox(F.down,F.up))}function u(){return F.dragging}function v(){F.dragging=!0,F.changeStartBounds=$.extend({},F.boundsPx)}function w(a){var d=a.x-F.down.x,e=a.y-F.down.y,f=F.changeStartBounds,g={xmin:f.xmin+d,xmax:f.xmax+d,ymin:f.ymin+e,ymax:f.ymax+e};if(b.brushClip){var h=F.panel.range,i=[g.xmin,g.xmax],k=[g.ymin,g.ymax];i=c.shiftToRange(i,h.left,h.right),k=c.shiftToRange(k,h.top,h.bottom),g={xmin:i[0],xmax:i[1],ymin:k[0],ymax:k[1]}}j(g),n()}function x(){F.dragging=!1}function y(){return F.resizing}function z(){F.resizing=!0,F.changeStartBounds=$.extend({},F.boundsPx),F.resizeSides=i(F.down)}function A(a){var b=a.x-F.down.x,d=a.y-F.down.y,e=$.extend({},F.changeStartBounds),f=F.panel.range;F.resizeSides.left?e.xmin=c.shiftToRange([e.xmin+b],f.left,e.xmax)[0]:F.resizeSides.right&&(e.xmax=c.shiftToRange([e.xmax+b],e.xmin,f.right)[0]),F.resizeSides.top?e.ymin=c.shiftToRange([e.ymin+d],f.top,e.ymax)[0]:F.resizeSides.bottom&&(e.ymax=c.shiftToRange([e.ymax+d],e.ymin,f.bottom)[0]),j(e),n()}function B(){F.resizing=!1}var C=10,D=a[0],E=null,F={};return e(),{reset:e,importOldBrush:f,isInsideBrush:g,isInResizeArea:h,whichResizeSides:i,boundsPx:j,boundsData:k,getPanel:l,down:o,up:p,isBrushing:q,startBrushing:r,brushTo:s,stopBrushing:t,isDragging:u,startDragging:v,dragTo:w,stopDragging:x,isResizing:y,startResizing:z,resizeTo:A,stopResizing:B}},exports.resetBrush=function(a){exports.onInputChange(a,null),imageOutputBinding.find(document).trigger("shiny-internal:brushed",{brushId:a,outputId:null})};var htmlOutputBinding=new OutputBinding;$.extend(htmlOutputBinding,{find:function(a){return $(a).find(".shiny-html-output")},onValueError:function(a,b){exports.unbindAll(a),this.renderError(a,b)},renderValue:function(a,b){exports.renderContent(a,b)}}),outputBindings.register(htmlOutputBinding,"shiny.htmlOutput");var renderDependencies=exports.renderDependencies=function(a){a&&$.each(a,function(a,b){renderDependency(b)})};exports.renderContent=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===c&&exports.unbindAll(a),exports.unbindAll(a);var d,e=[];null===b?d="":"string"==typeof b?d=b:"object"===("undefined"==typeof b?"undefined":_typeof(b))&&(d=b.html,e=b.deps||[]),exports.renderHtml(d,a,e,c);var f=a;if("replace"===c)exports.initializeInputs(a),exports.bindAll(a);else{var g=$(a).parent();if(g.length>0&&(f=g,"beforeBegin"===c||"afterEnd"===c)){var h=g.parent();h.length>0&&(f=h)}exports.initializeInputs(f),exports.bindAll(f)}},exports.renderHtml=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace";return renderDependencies(c),singletons.renderHtml(a,b,d)};var htmlDependencies={},singletons={knownSingletons:{},renderHtml:function(a,b,c){var d=this._processHtml(a);return this._addToHead(d.head),this.register(d.singletons),"replace"===c?$(b).html(d.html):b.insertAdjacentHTML(c,d.html),d},register:function(a){$.extend(this.knownSingletons,a)},registerNames:function(a){if("string"==typeof a)this.knownSingletons[a]=!0;else if(a instanceof Array)for(var b=0;b<a.length;b++)this.knownSingletons[a[b]]=!0},_addToHead:function(a){if(a.length>0)for(var b=$("<div>"+a+"</div>")[0],c=$("head");b.hasChildNodes();)c.append(b.firstChild)},_processHtml:function(a){for(var b,c=this,d={},e=function(a,b,e,f){return c.knownSingletons[e]||d[e]?"":(d[e]=!0,f)};;){if(b=a.replace(c._reSingleton,e),a.length===b.length)break;a=b}for(var f=[],g=function(a,b){return f.push(b),""};;){if(b=a.replace(c._reHead,g),a.length===b.length)break;a=b}return{html:a,head:f.join("\n"),singletons:d}},_reSingleton:/<!--(SHINY.SINGLETON\[([\w]+)\])-->([\s\S]*?)<!--\/\1-->/,_reHead:/<head(?:\s[^>]*)?>([\s\S]*?)<\/head>/},downloadLinkOutputBinding=new OutputBinding;$.extend(downloadLinkOutputBinding,{find:function(a){return $(a).find("a.shiny-download-link")},renderValue:function(a,b){$(a).attr("href",b)}}),outputBindings.register(downloadLinkOutputBinding,"shiny.downloadLink"),$(document).on("click.shinyDownloadLink","a.shiny-download-link",function(a){var b=jQuery.Event("shiny:filedownload");b.name=this.id,b.href=this.href,$(document).trigger(b)});var datatableOutputBinding=new OutputBinding;$.extend(datatableOutputBinding,{find:function(a){return $(a).find(".shiny-datatable-output")},onValueError:function(a,b){exports.unbindAll(a),this.renderError(a,b)},renderValue:function renderValue(el,_data){var $el=$(el).empty();if(_data&&_data.colnames){var colnames=$.makeArray(_data.colnames),header=$.map(colnames,function(a){return"<th>"+a+"</th>"}).join("");header="<thead><tr>"+header+"</tr></thead>";var footer="";null!==_data.options&&_data.options.searching===!1||(footer=$.map(colnames,function(a){return'<th><input type="text" placeholder="'+escapeHTML(a.replace(/(<([^>]+)>)/gi,""))+'" /></th>'}).join(""),footer="<tfoot>"+footer+"</tfoot>");var content='<table class="table table-striped table-hover">'+header+footer+"</table>";$el.append(content),_data.evalOptions&&$.each(_data.evalOptions,function(i,x){_data.options[x]=eval("("+_data.options[x]+")")});var searchCI=null===_data.options||"undefined"==typeof _data.options.search||_data.options.search.caseInsensitive!==!1,oTable=$(el).children("table").DataTable($.extend({processing:!0,serverSide:!0,order:[],orderClasses:!1,pageLength:25,ajax:{url:_data.action,type:"POST",data:function(a){a.search.caseInsensitive=searchCI,a.escape=_data.escape}}},_data.options));if("string"==typeof _data.callback){var callback=eval("("+_data.callback+")");"function"==typeof callback&&callback(oTable)}$el.find("label input").first().unbind("keyup").keyup(debounce(_data.searchDelay,function(){oTable.search(this.value).draw()}));var searchInputs=$el.find("tfoot input");searchInputs.length>0&&($.each(oTable.settings()[0].aoColumns,function(a,b){b.bSearchable||searchInputs.eq(a).hide()}),searchInputs.keyup(debounce(_data.searchDelay,function(){oTable.column(searchInputs.index(this)).search(this.value).draw()}))),$el.parents(".tab-content").css("overflow","visible")}}}),outputBindings.register(datatableOutputBinding,"shiny.datatableOutput");var OutputBindingAdapter=function(a,b){this.el=a,this.binding=b,b.resize&&(this.onResize=makeResizeFilter(a,function(c,d){b.resize(a,c,d)}))};(function(){this.getId=function(){return this.binding.getId(this.el)},this.onValueChange=function(a){this.binding.onValueChange(this.el,a)},this.onValueError=function(a){this.binding.onValueError(this.el,a)},this.showProgress=function(a){this.binding.showProgress(this.el,a)},this.onResize=function(){}}).call(OutputBindingAdapter.prototype);var InputBinding=exports.InputBinding=function(){};(function(){this.find=function(a){throw"Not implemented"},this.getId=function(a){return a["data-input-id"]||a.id},this.getType=function(){return!1},this.getValue=function(a){throw"Not implemented"},this.subscribe=function(a,b){},this.unsubscribe=function(a){},this.receiveMessage=function(a,b){throw"Not implemented"},this.getState=function(a,b){throw"Not implemented"},this.getRatePolicy=function(){return null},this.initialize=function(a){},this.dispose=function(a){}}).call(InputBinding.prototype);var textInputBinding=new InputBinding;$.extend(textInputBinding,{find:function(a){return $(a).find('input[type="text"], input[type="search"], input[type="url"], input[type="email"]')},getId:function(a){return InputBinding.prototype.getId.call(this,a)||a.name},getValue:function(a){return a.value},setValue:function(a,b){a.value=b},subscribe:function(a,b){$(a).on("keyup.textInputBinding input.textInputBinding",function(a){b(!0)}),$(a).on("change.textInputBinding",function(a){b(!1)})},unsubscribe:function(a){$(a).off(".textInputBinding")},receiveMessage:function(a,b){b.hasOwnProperty("value")&&this.setValue(a,b.value),b.hasOwnProperty("label")&&$(a).parent().find('label[for="'+$escape(a.id)+'"]').text(b.label),$(a).trigger("change")},getState:function(a){return{label:$(a).parent().find('label[for="'+$escape(a.id)+'"]').text(),value:a.value}},getRatePolicy:function(){return{policy:"debounce",delay:250}}}),inputBindings.register(textInputBinding,"shiny.textInput");var textareaInputBinding={};$.extend(textareaInputBinding,textInputBinding,{find:function(a){return $(a).find("textarea")}}),inputBindings.register(textareaInputBinding,"shiny.textareaInput");var passwordInputBinding={};$.extend(passwordInputBinding,textInputBinding,{find:function(a){return $(a).find('input[type="password"]')},getType:function(a){return"shiny.password"}}),inputBindings.register(passwordInputBinding,"shiny.passwordInput");var numberInputBinding={};$.extend(numberInputBinding,textInputBinding,{find:function(a){return $(a).find('input[type="number"]')},getValue:function(a){var b=$(a).val();return/^\s*$/.test(b)?null:isNaN(b)?b:+b},setValue:function(a,b){a.value=b},getType:function(a){return"shiny.number"},receiveMessage:function(a,b){b.hasOwnProperty("value")&&(a.value=b.value),b.hasOwnProperty("min")&&(a.min=b.min),b.hasOwnProperty("max")&&(a.max=b.max),b.hasOwnProperty("step")&&(a.step=b.step),b.hasOwnProperty("label")&&$(a).parent().find('label[for="'+$escape(a.id)+'"]').text(b.label),$(a).trigger("change")},getState:function(a){return{label:$(a).parent().find('label[for="'+$escape(a.id)+'"]').text(),value:this.getValue(a),min:Number(a.min),max:Number(a.max),step:Number(a.step)}}}),inputBindings.register(numberInputBinding,"shiny.numberInput");var checkboxInputBinding=new InputBinding;$.extend(checkboxInputBinding,{find:function(a){return $(a).find('input[type="checkbox"]')},getValue:function(a){return a.checked},setValue:function(a,b){a.checked=b},subscribe:function(a,b){$(a).on("change.checkboxInputBinding",function(a){b(!0)})},unsubscribe:function(a){$(a).off(".checkboxInputBinding")},getState:function(a){return{label:$(a).parent().find("span").text(),value:a.checked}},receiveMessage:function(a,b){b.hasOwnProperty("value")&&(a.checked=b.value),b.hasOwnProperty("label")&&$(a).parent().find("span").text(b.label),$(a).trigger("change")}}),inputBindings.register(checkboxInputBinding,"shiny.checkboxInput");var sliderInputBinding={};$.extend(sliderInputBinding,textInputBinding,{find:function(a){return $.fn.ionRangeSlider?$(a).find("input.js-range-slider"):[]},getType:function(a){var b=$(a).data("data-type");return"date"===b?"shiny.date":"datetime"===b&&"shiny.datetime"},getValue:function(a){var b,c=$(a),d=$(a).data("ionRangeSlider").result,e=c.data("data-type");return b="date"===e?function(a){return formatDateUTC(new Date((+a)))}:"datetime"===e?function(a){return+a/1e3}:function(a){return+a},2===this._numValues(a)?[b(d.from),b(d.to)]:b(d.from)},setValue:function(a,b){var c=$(a),d=c.data("ionRangeSlider");c.data("immediate",!0);try{2===this._numValues(a)&&b instanceof Array?d.update({from:b[0],to:b[1]}):d.update({from:b}),forceIonSliderUpdate(d)}finally{c.data("immediate",!1)}},subscribe:function(a,b){$(a).on("change.sliderInputBinding",function(c){b(!$(a).data("immediate")&&!$(a).data("animating"))})},unsubscribe:function(a){$(a).off(".sliderInputBinding")},receiveMessage:function(a,b){var c=$(a),d=c.data("ionRangeSlider"),e={};b.hasOwnProperty("value")&&(2===this._numValues(a)&&b.value instanceof Array?(e.from=b.value[0],e.to=b.value[1]):e.from=b.value),b.hasOwnProperty("min")&&(e.min=b.min),b.hasOwnProperty("max")&&(e.max=b.max),b.hasOwnProperty("step")&&(e.step=b.step),b.hasOwnProperty("label")&&c.parent().find('label[for="'+$escape(a.id)+'"]').text(b.label),c.data("immediate",!0);try{d.update(e),forceIonSliderUpdate(d)}finally{c.data("immediate",!1)}},getRatePolicy:function(){return{policy:"debounce",delay:250}},getState:function(a){},initialize:function(a){var b,c={},d=$(a),e=d.data("data-type"),f=d.data("time-format");if("date"===e)b=strftime.utc(),c.prettify=function(a){return b(f,new Date(a))};else if("datetime"===e){var g=d.data("timezone");b=g?strftime.timezone(g):strftime,c.prettify=function(a){return b(f,new Date(a))}}d.ionRangeSlider(c)},_numValues:function(a){return"double"===$(a).data("ionRangeSlider").options.type?2:1}}),inputBindings.register(sliderInputBinding,"shiny.sliderInput"),$(document).on("click",".slider-animate-button",function(a){a.preventDefault();var b=$(this),c=$("#"+$escape(b.attr("data-target-id"))),d="Play",e="Pause",f=void 0!==b.attr("data-loop")&&!/^\s*false\s*$/i.test(b.attr("data-loop")),g=b.attr("data-interval");if(g=isNaN(g)?1500:+g,c.data("animTimer"))clearTimeout(c.data("animTimer")),c.removeData("animTimer"),b.attr("title",d),b.removeClass("playing"),c.removeData("animating");else{var h,i;if(c.hasClass("jslider"))h=c.slider(),h.canStepNext()||h.resetToStart(),i=setInterval(function(){f&&!h.canStepNext()?h.resetToStart():(h.stepNext(),f||h.canStepNext()||b.click())},g);else{h=c.data("ionRangeSlider");var j=function(){return"double"===h.options.type?h.result.to<h.result.max:h.result.from<h.result.max},k=function(){var a={from:h.result.min};"double"===h.options.type&&(a.to=a.from+(h.result.to-h.result.from)),h.update(a),forceIonSliderUpdate(h)},l=function(){var a={from:Math.min(h.result.max,h.result.from+h.options.step)};"double"===h.options.type&&(a.to=Math.min(h.result.max,h.result.to+h.options.step)),h.update(a),forceIonSliderUpdate(h)};j()||k(),i=setInterval(function(){f&&!j()?k():(l(),f||j()||b.click())},g);
}c.data("animTimer",i),b.attr("title",e),b.addClass("playing"),c.data("animating",!0)}});var dateInputBinding=new InputBinding;$.extend(dateInputBinding,{find:function(a){return $(a).find(".shiny-date-input")},getType:function(a){return"shiny.date"},getValue:function(a){var b=$(a).find("input").bsDatepicker("getUTCDate");return formatDateUTC(b)},setValue:function(a,b){if(null===b)return void $(a).find("input").val("").bsDatepicker("update");var c=this._newDate(b);isNaN(c)||$(a).find("input").bsDatepicker("setUTCDate",c)},getState:function(a){var b=$(a),c=b.find("input"),d=c.data("datepicker").startDate,e=c.data("datepicker").endDate;d=d===-(1/0)?null:formatDateUTC(d),e=e===1/0?null:formatDateUTC(e);var f=c.data("datepicker").startViewMode;return 2===f?f="decade":1===f?f="year":0===f&&(f="month"),{label:b.find('label[for="'+$escape(a.id)+'"]').text(),value:this.getValue(a),valueString:c.val(),min:d,max:e,language:c.data("datepicker").language,weekstart:c.data("datepicker").weekStart,format:this._formatToString(c.data("datepicker").format),startview:f}},receiveMessage:function(a,b){var c=$(a).find("input");b.hasOwnProperty("label")&&$(a).find('label[for="'+$escape(a.id)+'"]').text(b.label),b.hasOwnProperty("min")&&this._setMin(c[0],b.min),b.hasOwnProperty("max")&&this._setMax(c[0],b.max),b.hasOwnProperty("value")&&this.setValue(a,b.value),$(a).trigger("change")},subscribe:function(a,b){$(a).on("keyup.dateInputBinding input.dateInputBinding",function(a){b(!0)}),$(a).on("changeDate.dateInputBinding change.dateInputBinding",function(a){b(!1)})},unsubscribe:function(a){$(a).off(".dateInputBinding")},getRatePolicy:function(){return{policy:"debounce",delay:250}},initialize:function(a){var b=$(a).find("input"),c=b.data("initial-date");void 0!==c&&null!==c||(c=this._dateAsUTC(new Date)),this.setValue(a,c),void 0!==b.data("min-date")&&this._setMin(b[0],b.data("min-date")),void 0!==b.data("max-date")&&this._setMax(b[0],b.data("max-date"))},_formatToString:function(a){for(var b="",c=0;c<a.parts.length;c++)b+=a.separators[c]+a.parts[c];return b+=a.separators[c]},_setMin:function(a,b){if(void 0!==b)if(null===b)$(a).bsDatepicker("setStartDate",null);else if(b=this._newDate(b),b=this._UTCDateAsLocal(b),!isNaN(b)){var c=$(a).bsDatepicker("getUTCDate");$(a).bsDatepicker("setStartDate",b),$(a).bsDatepicker("setUTCDate",c)}},_setMax:function(a,b){if(void 0!==b)if(null===b)$(a).bsDatepicker("setEndDate",null);else if(b=this._newDate(b),b=this._UTCDateAsLocal(b),!isNaN(b)){var c=$(a).bsDatepicker("getUTCDate");$(a).bsDatepicker("setEndDate",b),$(a).bsDatepicker("setUTCDate",c)}},_newDate:function(a){if(a instanceof Date)return a;if(!a)return null;var b=parseDate(a);return isNaN(b)?null:new Date(b.getTime())},_dateAsUTC:function(a){return new Date(a.getTime()-6e4*a.getTimezoneOffset())},_UTCDateAsLocal:function(a){return new Date(a.getTime()+6e4*a.getTimezoneOffset())}}),inputBindings.register(dateInputBinding,"shiny.dateInput");var dateRangeInputBinding={};$.extend(dateRangeInputBinding,dateInputBinding,{find:function(a){return $(a).find(".shiny-date-range-input")},getValue:function(a){var b=$(a).find("input"),c=b.eq(0).bsDatepicker("getUTCDate"),d=b.eq(1).bsDatepicker("getUTCDate");return[formatDateUTC(c),formatDateUTC(d)]},setValue:function(a,b){if(b instanceof Object){var c=$(a).find("input");if(void 0!==b.start)if(null===b.start)c.eq(0).val("").bsDatepicker("update");else{var d=this._newDate(b.start);c.eq(0).bsDatepicker("setUTCDate",d)}if(void 0!==b.end)if(null===b.end)c.eq(1).val("").bsDatepicker("update");else{var e=this._newDate(b.end);c.eq(1).bsDatepicker("setUTCDate",e)}}},getState:function(a){var b=$(a),c=b.find("input"),d=c.eq(0),e=c.eq(1),f=d.bsDatepicker("getStartDate"),g=d.bsDatepicker("getEndDate");f=f===-(1/0)?null:formatDateUTC(f),g=g===1/0?null:formatDateUTC(g);var h=d.data("datepicker").startView;return 2===h?h="decade":1===h?h="year":0===h&&(h="month"),{label:b.find('label[for="'+$escape(a.id)+'"]').text(),value:this.getValue(a),valueString:[d.val(),e.val()],min:f,max:g,weekstart:d.data("datepicker").weekStart,format:this._formatToString(d.data("datepicker").format),language:d.data("datepicker").language,startview:h}},receiveMessage:function(a,b){var c=$(a),d=c.find("input"),e=d.eq(0),f=d.eq(1);b.hasOwnProperty("label")&&c.find('label[for="'+$escape(a.id)+'"]').text(b.label),b.hasOwnProperty("min")&&(this._setMin(e[0],b.min),this._setMin(f[0],b.min)),b.hasOwnProperty("max")&&(this._setMax(e[0],b.max),this._setMax(f[0],b.max)),b.hasOwnProperty("value")&&this.setValue(a,b.value),c.trigger("change")},initialize:function(a){var b=$(a),c=b.find("input"),d=c.eq(0),e=c.eq(1),f=d.data("initial-date"),g=e.data("initial-date");void 0!==f&&null!==f||(f=this._dateAsUTC(new Date)),void 0!==g&&null!==g||(g=this._dateAsUTC(new Date)),this.setValue(a,{start:f,end:g}),this._setMin(d[0],d.data("min-date")),this._setMin(e[0],d.data("min-date")),this._setMax(d[0],e.data("max-date")),this._setMax(e[0],e.data("max-date"))},subscribe:function(a,b){$(a).on("keyup.dateRangeInputBinding input.dateRangeInputBinding",function(a){b(!0)}),$(a).on("changeDate.dateRangeInputBinding change.dateRangeInputBinding",function(a){b(!1)})},unsubscribe:function(a){$(a).off(".dateRangeInputBinding")}}),inputBindings.register(dateRangeInputBinding,"shiny.dateRangeInput");var selectInputBinding=new InputBinding;$.extend(selectInputBinding,{find:function(a){return $(a).find("select")},getId:function(a){return InputBinding.prototype.getId.call(this,a)||a.name},getValue:function(a){return $(a).val()},setValue:function(a,b){var c=this._selectize(a);"undefined"!=typeof c?c.setValue(b):$(a).val(b)},getState:function(a){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]={value:a[c].value,label:a[c].label};return{label:$(a).parent().find('label[for="'+$escape(a.id)+'"]').text(),value:this.getValue(a),options:b}},receiveMessage:function(a,b){var c,d=$(a);if(b.hasOwnProperty("options")&&(c=this._selectize(a),c&&c.destroy(),d.empty().append(b.options),this._selectize(a)),b.hasOwnProperty("config")&&(d.parent().find('script[data-for="'+$escape(a.id)+'"]').replaceWith(b.config),this._selectize(a,!0)),b.hasOwnProperty("url")){c=this._selectize(a),c.clearOptions();var e=this,f=!1;c.settings.load=function(d,g){var h=c.settings;$.ajax({url:b.url,data:{query:d,field:JSON.stringify([h.searchField]),value:h.valueField,conju:h.searchConjunction,maxop:h.maxOptions},type:"GET",error:function(){g()},success:function(c){g(c),!f&&b.hasOwnProperty("value")&&e.setValue(a,b.value),f=!0}})},c.load(function(a){c.settings.load.apply(c,["",a])})}else b.hasOwnProperty("value")&&this.setValue(a,b.value);b.hasOwnProperty("label")&&$(a).parent().parent().find('label[for="'+$escape(a.id)+'"]').text(b.label),$(a).trigger("change")},subscribe:function(a,b){$(a).on("change.selectInputBinding",function(a){b()})},unsubscribe:function(a){$(a).off(".selectInputBinding")},initialize:function(a){this._selectize(a)},_selectize:function _selectize(el,update){if($.fn.selectize){var $el=$(el),config=$el.parent().find('script[data-for="'+$escape(el.id)+'"]');if(0!==config.length){var options=$.extend({labelField:"label",valueField:"value",searchField:["label"]},JSON.parse(config.html()));"undefined"!=typeof config.data("nonempty")&&(options=$.extend(options,{onItemRemove:function(a){""===this.getValue()&&$("select#"+$escape(el.id)).empty().append($("<option/>",{value:a,selected:!0})).trigger("change")},onDropdownClose:function(a){""===this.getValue()&&this.setValue($("select#"+$escape(el.id)).val())}})),config.data("eval")instanceof Array&&$.each(config.data("eval"),function(i,x){options[x]=eval("("+options[x]+")")});var control=$el.selectize(options)[0].selectize;if(update){var settings=$.extend(control.settings,options);control.destroy(),control=$el.selectize(settings)[0].selectize}return control}}}}),inputBindings.register(selectInputBinding,"shiny.selectInput");var radioInputBinding=new InputBinding;$.extend(radioInputBinding,{find:function(a){return $(a).find(".shiny-input-radiogroup")},getValue:function(a){return $('input:radio[name="'+$escape(a.id)+'"]:checked').val()},setValue:function(a,b){$('input:radio[name="'+$escape(a.id)+'"][value="'+$escape(b)+'"]').prop("checked",!0)},getState:function(a){for(var b=$('input:radio[name="'+$escape(a.id)+'"]'),c=new Array(b.length),d=0;d<c.length;d++)c[d]={value:b[d].value,label:this._getLabel(b[d])};return{label:$(a).parent().find('label[for="'+$escape(a.id)+'"]').text(),value:this.getValue(a),options:c}},receiveMessage:function(a,b){var c=$(a);b.hasOwnProperty("options")&&(c.find("div.shiny-options-group").remove(),c.find("label.radio").remove(),c.append(b.options)),b.hasOwnProperty("value")&&this.setValue(a,b.value),b.hasOwnProperty("label")&&$(a).parent().find('label[for="'+$escape(a.id)+'"]').text(b.label),$(a).trigger("change")},subscribe:function(a,b){$(a).on("change.radioInputBinding",function(a){b()})},unsubscribe:function(a){$(a).off(".radioInputBinding")},_getLabel:function(a){return"LABEL"===a.parentNode.tagName?$.trim($(a.parentNode).find("span").text()):null},_setLabel:function(a,b){return"LABEL"===a.parentNode.tagName&&$(a.parentNode).find("span").text(b),null}}),inputBindings.register(radioInputBinding,"shiny.radioInput");var checkboxGroupInputBinding=new InputBinding;$.extend(checkboxGroupInputBinding,{find:function(a){return $(a).find(".shiny-input-checkboxgroup")},getValue:function(a){for(var b=$('input:checkbox[name="'+$escape(a.id)+'"]:checked'),c=new Array(b.length),d=0;d<b.length;d++)c[d]=b[d].value;return c},setValue:function(a,b){if($('input:checkbox[name="'+$escape(a.id)+'"]').prop("checked",!1),b instanceof Array)for(var c=0;c<b.length;c++)$('input:checkbox[name="'+$escape(a.id)+'"][value="'+$escape(b[c])+'"]').prop("checked",!0);else $('input:checkbox[name="'+$escape(a.id)+'"][value="'+$escape(b)+'"]').prop("checked",!0)},getState:function(a){for(var b=$('input:checkbox[name="'+$escape(a.id)+'"]'),c=new Array(b.length),d=0;d<c.length;d++)c[d]={value:b[d].value,label:this._getLabel(b[d])};return{label:$(a).find('label[for="'+$escape(a.id)+'"]').text(),value:this.getValue(a),options:c}},receiveMessage:function(a,b){var c=$(a);b.hasOwnProperty("options")&&(c.find("div.shiny-options-group").remove(),c.find("label.checkbox").remove(),c.append(b.options)),b.hasOwnProperty("value")&&this.setValue(a,b.value),b.hasOwnProperty("label")&&c.find('label[for="'+$escape(a.id)+'"]').text(b.label),$(a).trigger("change")},subscribe:function(a,b){$(a).on("change.checkboxGroupInputBinding",function(a){b()})},unsubscribe:function(a){$(a).off(".checkboxGroupInputBinding")},_getLabel:function(a){return"LABEL"===a.parentNode.tagName?$.trim($(a.parentNode).find("span").text()):null},_setLabel:function(a,b){return"LABEL"===a.parentNode.tagName&&$(a.parentNode).find("span").text(b),null}}),inputBindings.register(checkboxGroupInputBinding,"shiny.checkboxGroupInput");var actionButtonInputBinding=new InputBinding;$.extend(actionButtonInputBinding,{find:function(a){return $(a).find(".action-button")},getValue:function(a){return $(a).data("val")||0},setValue:function(a,b){$(a).data("val",b)},getType:function(a){return"shiny.action"},subscribe:function(a,b){$(a).on("click.actionButtonInputBinding",function(a){var c=$(this),d=c.data("val")||0;c.data("val",d+1),b()})},getState:function(a){return{value:this.getValue(a)}},receiveMessage:function(a,b){var c=$(a),d=c.text(),e="";if(c.find("i[class]").length>0){var f=c.find("i[class]")[0];f===c.children()[0]&&(e=$(f).prop("outerHTML"))}b.hasOwnProperty("label")&&(d=b.label),b.hasOwnProperty("icon")&&(e=b.icon,0===e.length&&(e="")),c.html(e+" "+d)},unsubscribe:function(a){$(a).off(".actionButtonInputBinding")}}),inputBindings.register(actionButtonInputBinding,"shiny.actionButtonInput"),$(document).on("click","a.action-button",function(a){a.preventDefault()});var bootstrapTabInputBinding=new InputBinding;$.extend(bootstrapTabInputBinding,{find:function(a){return $(a).find("ul.nav.shiny-tab-input")},getValue:function(a){var b=$(a).find("li:not(.dropdown).active").children("a");return 1===b.length?this._getTabName(b):null},setValue:function(a,b){var c=this,d=$(a).find("li:not(.dropdown)").children("a");d.each(function(){return c._getTabName($(this))!==b||($(this).tab("show"),!1)})},getState:function(a){return{value:this.getValue(a)}},receiveMessage:function(a,b){b.hasOwnProperty("value")&&this.setValue(a,b.value)},subscribe:function(a,b){$(a).on("shown.bootstrapTabInputBinding shown.bs.tab.bootstrapTabInputBinding",function(a){b()})},unsubscribe:function(a){$(a).off(".bootstrapTabInputBinding")},_getTabName:function(a){return a.attr("data-value")||a.text()}}),inputBindings.register(bootstrapTabInputBinding,"shiny.bootstrapTabInput");var IE8FileUploader=function(a,b,c){this.shinyapp=a,this.id=b,this.fileEl=c,this.beginUpload()};(function(){this.beginUpload=function(){var a=this,b="shinyupload_iframe_"+this.id;this.iframe=document.createElement("iframe"),this.iframe.id=b,this.iframe.name=b,this.iframe.setAttribute("style","position: fixed; top: 0; left: 0; width: 0; height: 0; border: none"),$("body").append(this.iframe);var c=function(){a.shinyapp.makeRequest("uploadieFinish",[],function(){},function(){}),$(a.iframe).remove()};this.iframe.attachEvent?this.iframe.attachEvent("onload",c):this.iframe.onload=c,this.form=document.createElement("form"),this.form.method="POST",this.form.setAttribute("enctype","multipart/form-data"),this.form.action="session/"+encodeURI(this.shinyapp.config.sessionId)+"/uploadie/"+encodeURI(this.id),this.form.id="shinyupload_form_"+this.id,this.form.target=b,$(this.form).insertAfter(this.fileEl).append(this.fileEl),this.form.submit()}}).call(IE8FileUploader.prototype);var FileUploader=function(a,b,c,d){this.shinyapp=a,this.id=b,this.el=d,FileProcessor.call(this,c)};$.extend(FileUploader.prototype,FileProcessor.prototype),function(){this.makeRequest=function(a,b,c,d,e){this.shinyapp.makeRequest(a,b,c,d,e)},this.onBegin=function(a,b){var c=this;this.$setError(null),this.$setActive(!0),this.$setVisible(!0),this.onProgress(null,0),this.totalBytes=0,this.progressBytes=0,$.each(a,function(a,b){c.totalBytes+=b.size});var d=$.map(a,function(a,b){return{name:a.name,size:a.size,type:a.type}});this.makeRequest("uploadInit",[d],function(a){c.jobId=a.jobId,c.uploadUrl=a.uploadUrl,b()},function(a){c.onError(a)})},this.onFile=function(a,b){var c=this;this.onProgress(a,0),$.ajax(this.uploadUrl,{type:"POST",cache:!1,xhr:function(){var b=$.ajaxSettings.xhr();return b.upload&&(b.upload.onprogress=function(b){b.lengthComputable&&c.onProgress(a,(c.progressBytes+b.loaded)/c.totalBytes)}),b},data:a,processData:!1,success:function(){c.progressBytes+=a.size,b()},error:function(a,b,d){c.onError(a.responseText||b)}})},this.onComplete=function(){var a=this,b=$.map(this.files,function(a,b){return{name:a.name,size:a.size,type:a.type}}),c=jQuery.Event("shiny:inputchanged");c.name=this.id,c.value=b,c.binding=fileInputBinding,c.el=this.el,c.inputType="shiny.fileupload",$(document).trigger(c),this.makeRequest("uploadEnd",[this.jobId,this.id],function(b){a.$setActive(!1),a.onProgress(null,1),a.$bar().text("Upload complete")},function(b){a.onError(b)}),this.$bar().text("Finishing upload")},this.onError=function(a){this.$setError(a||""),this.$setActive(!1)},this.onAbort=function(){this.$setVisible(!1)},this.onProgress=function(a,b){this.$bar().width(Math.round(100*b)+"%"),this.$bar().text(a?a.name:"")},this.$container=function(){return $("#"+$escape(this.id)+"_progress.shiny-file-input-progress")},this.$bar=function(){return $("#"+$escape(this.id)+"_progress.shiny-file-input-progress .progress-bar")},this.$setVisible=function(a){this.$container().css("visibility",a?"visible":"hidden")},this.$setError=function(a){this.$bar().toggleClass("progress-bar-danger",null!==a),null!==a&&(this.onProgress(null,1),this.$bar().text(a))},this.$setActive=function(a){this.$container().toggleClass("active",!!a)}}.call(FileUploader.prototype);var fileInputBinding=new InputBinding;$.extend(fileInputBinding,{find:function(a){return $(a).find('input[type="file"]')},getId:function(a){return InputBinding.prototype.getId.call(this,a)||a.name},getValue:function(a){var b=$(a).attr("data-restore");if(b){b=JSON.parse(b);var c=$(a).closest("div.input-group").find("input[type=text]");1===b.name.length?c.val(b.name[0]):c.val(b.name.length+" files");var d=$(a).closest("div.form-group").find(".progress"),e=d.find(".progress-bar");return d.removeClass("active"),e.width("100%"),e.css("visibility","visible"),b}return null},setValue:function(a,b){},getType:function(a){return"shiny.file"},subscribe:function(a,b){$(a).on("change.fileInputBinding",uploadFiles)},unsubscribe:function(a){$(a).off(".fileInputBinding")}}),inputBindings.register(fileInputBinding,"shiny.fileInputBinding"),$(function(){setTimeout(initShiny,1)}),$(document).on("keydown",function(a){if(114===a.which&&(a.ctrlKey||a.metaKey)&&!a.shiftKey&&!a.altKey){var b="reactlog?w="+window.escape(exports.shinyapp.config.workerId)+"&s="+window.escape(exports.shinyapp.config.sessionId);window.open(b),a.preventDefault()}})}();
//# sourceMappingURL=shiny.min.js.map